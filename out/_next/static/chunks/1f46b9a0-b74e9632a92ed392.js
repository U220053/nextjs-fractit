"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1676],{85381:function(e,t,n){var a,r,i,s,o,c,l,d,u,h,p,f,g,y,m,v,E,_,b,T,A,w,C,k,I,S,D,x,V,N,O,B,R,P,F,M,L,H=Object.create,U=Object.defineProperty,j=Object.getOwnPropertyDescriptor,q=Object.getOwnPropertyNames,K=Object.getPrototypeOf,Y=Object.prototype.hasOwnProperty,W=(e,t)=>{for(var n in t)U(e,n,{get:t[n],enumerable:!0})},G=(e,t,n,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of q(t))Y.call(e,r)||r===n||U(e,r,{get:()=>t[r],enumerable:!(a=j(t,r))||a.enumerable});return e},X=(e,t,n)=>(n=null!=e?H(K(e)):{},G(!t&&e&&e.__esModule?n:U(n,"default",{value:e,enumerable:!0}),e)),J={};W(J,{Account:()=>iO,AccountInterface:()=>iB,BlockStatus:()=>ta,BlockTag:()=>tr,CairoCustomEnum:()=>nk,CairoOption:()=>nS,CairoOptionVariant:()=>nI,CairoResult:()=>nx,CairoResultVariant:()=>nD,CairoUint256:()=>t5,CairoUint512:()=>t7,CallData:()=>n1,Contract:()=>i0,ContractFactory:()=>i2,ContractInterface:()=>i1,CustomError:()=>e0,EntryPointType:()=>e7,EthSigner:()=>ik,GatewayError:()=>e2,HttpError:()=>e6,LibraryError:()=>e1,Literal:()=>e8,Provider:()=>r8,ProviderInterface:()=>r7,RPC:()=>z,RPC06:()=>ez,RPC07:()=>rS,RPCResponseParser:()=>rV,ReceiptTx:()=>rN,ResponseParser:()=>i6,RpcChannel:()=>rx,RpcProvider:()=>r8,Signer:()=>i_,SignerInterface:()=>ie,TransactionExecutionStatus:()=>tn,TransactionFinalityStatus:()=>tt,TransactionStatus:()=>te,TransactionType:()=>e9,TypedDataRevision:()=>ti.TypedDataRevision,UINT_128_MAX:()=>tz,UINT_128_MIN:()=>t8,UINT_256_HIGH_MAX:()=>t1,UINT_256_HIGH_MIN:()=>t6,UINT_256_LOW_MAX:()=>t0,UINT_256_LOW_MIN:()=>t2,UINT_256_MAX:()=>tZ,UINT_256_MIN:()=>tQ,UINT_512_MAX:()=>t3,UINT_512_MIN:()=>t4,Uint:()=>e4,ValidateType:()=>e3,WalletAccount:()=>iJ,addAddressPadding:()=>i3,buildUrl:()=>sr,byteArray:()=>tW,cairo:()=>tJ,constants:()=>$,contractClassResponseToLegacyCompiledContract:()=>a8,defaultProvider:()=>r9,ec:()=>n3,encode:()=>ef,eth:()=>a7,events:()=>iI,extractContractHashes:()=>a4,fixProto:()=>eQ,fixStack:()=>eZ,getCalldata:()=>iQ,getChecksumAddress:()=>i8,hash:()=>n2,isSierra:()=>a3,isUrl:()=>sa,json:()=>aE,merkle:()=>ia,num:()=>to,number:()=>si,parseCalldataField:()=>nH,provider:()=>ri,selector:()=>tD,shortString:()=>tR,splitArgsAndOptions:()=>i$,stark:()=>aj,starknetId:()=>rR,transaction:()=>rm,typedData:()=>it,types:()=>e5,uint256:()=>iT,v2hash:()=>n5,v3hash:()=>aa,validateAndParseAddress:()=>i4,validateChecksumAddress:()=>i7,wallet:()=>iR}),e.exports=G(U({},"__esModule",{value:!0}),J);var $={};W($,{ADDR_BOUND:()=>eP,API_VERSION:()=>eO,BaseUrl:()=>eU,FeeMarginPercentage:()=>eY,IS_BROWSER:()=>ey,MASK_250:()=>eN,MAX_STORAGE_ITEM_SIZE:()=>eR,NetworkName:()=>ej,PRIME:()=>eB,RANGE_FELT:()=>eM,RANGE_I128:()=>eL,RANGE_U128:()=>eH,RPC_DEFAULT_VERSION:()=>eG,RPC_NODES:()=>eX,StarknetChainId:()=>eq,TEXT_TO_FELT_MAX_LEN:()=>ex,TRANSACTION_VERSION:()=>z.ETransactionVersion,TransactionHashPrefix:()=>eK,UDC:()=>eW,ZERO:()=>eV});var z={};W(z,{JRPC:()=>Z,RPCSPEC06:()=>Q,RPCSPEC07:()=>ep});var Z={},Q={};W(Q,{EBlockTag:()=>eo,EDAMode:()=>el,EDataAvailabilityMode:()=>ec,ESimulationFlag:()=>ea,ETransactionExecutionStatus:()=>es,ETransactionFinalityStatus:()=>ei,ETransactionStatus:()=>er,ETransactionType:()=>en,ETransactionVersion:()=>ed,ETransactionVersion2:()=>eu,ETransactionVersion3:()=>eh,Errors:()=>ee,SPEC:()=>et});var ee={},et={},en=((a=en||{}).DECLARE="DECLARE",a.DEPLOY="DEPLOY",a.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",a.INVOKE="INVOKE",a.L1_HANDLER="L1_HANDLER",a),ea=((r=ea||{}).SKIP_VALIDATE="SKIP_VALIDATE",r.SKIP_FEE_CHARGE="SKIP_FEE_CHARGE",r),er=((i=er||{}).RECEIVED="RECEIVED",i.REJECTED="REJECTED",i.ACCEPTED_ON_L2="ACCEPTED_ON_L2",i.ACCEPTED_ON_L1="ACCEPTED_ON_L1",i),ei=((s=ei||{}).ACCEPTED_ON_L2="ACCEPTED_ON_L2",s.ACCEPTED_ON_L1="ACCEPTED_ON_L1",s),es=((o=es||{}).SUCCEEDED="SUCCEEDED",o.REVERTED="REVERTED",o),eo=((c=eo||{}).PENDING="pending",c.LATEST="latest",c),ec=((l=ec||{}).L1="L1",l.L2="L2",l),el=((d=el||{})[d.L1=0]="L1",d[d.L2=1]="L2",d),ed=((u=ed||{}).V0="0x0",u.V1="0x1",u.V2="0x2",u.V3="0x3",u.F0="0x100000000000000000000000000000000",u.F1="0x100000000000000000000000000000001",u.F2="0x100000000000000000000000000000002",u.F3="0x100000000000000000000000000000003",u),eu=((h=eu||{}).V0="0x0",h.V1="0x1",h.V2="0x2",h.F0="0x100000000000000000000000000000000",h.F1="0x100000000000000000000000000000001",h.F2="0x100000000000000000000000000000002",h),eh=((p=eh||{}).V3="0x3",p.F3="0x100000000000000000000000000000003",p),ep=X(n(18527));G(z,f=n(18527),"default"),g&&G(g,f,"default");var ef={};W(ef,{IS_BROWSER:()=>ey,addHexPrefix:()=>ew,arrayBufferToString:()=>em,atobUniversal:()=>e_,btoaUniversal:()=>eb,buf2hex:()=>eT,calcByteLength:()=>ek,padLeft:()=>eC,pascalToSnake:()=>eD,removeHexPrefix:()=>eA,sanitizeBytes:()=>eI,sanitizeHex:()=>eS,stringToArrayBuffer:()=>eE,utf8ToArray:()=>ev});var eg=n(89416),ey=!0;function em(e){return new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),"")}function ev(e){return new TextEncoder().encode(e)}function eE(e){return ev(e)}function e_(e){return eg.base64.decode(e)}function eb(e){return eg.base64.encode(new Uint8Array(e))}function eT(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function eA(e){return e.replace(/^0x/i,"")}function ew(e){return"0x".concat(eA(e))}function eC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0",r=t-e.length,i=e;if(r>0){let t=a.repeat(r);i=n?t+e:e+t}return i}(e,t,!0,n)}function ek(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,{length:n}=e,a=n%t;return a?(n-a)/t*t+t:n}function eI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return eC(e,ek(e,t),n)}function eS(e){return(e=eI(e=eA(e),2))&&(e=ew(e)),e}var eD=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e,ex=31,eV=0n,eN=2n**250n-1n,eO=eV,eB=2n**251n+17n*2n**192n+1n,eR=256n,eP=2n**251n-eR,eF=(e,t)=>({min:e,max:t}),eM=eF(eV,eB-1n),eL=eF(-(2n**127n),2n**127n-1n),eH=eF(eV,2n**128n-1n),eU=((y=eU||{}).SN_MAIN="https://alpha-mainnet.starknet.io",y.SN_SEPOLIA="https://alpha-sepolia.starknet.io",y),ej=((m=ej||{}).SN_MAIN="SN_MAIN",m.SN_SEPOLIA="SN_SEPOLIA",m),eq=((v=eq||{}).SN_MAIN="0x534e5f4d41494e",v.SN_SEPOLIA="0x534e5f5345504f4c4941",v),eK=((E=eK||{}).DECLARE="0x6465636c617265",E.DEPLOY="0x6465706c6f79",E.DEPLOY_ACCOUNT="0x6465706c6f795f6163636f756e74",E.INVOKE="0x696e766f6b65",E.L1_HANDLER="0x6c315f68616e646c6572",E),eY=((_=eY||{})[_.L1_BOUND_MAX_AMOUNT=50]="L1_BOUND_MAX_AMOUNT",_[_.L1_BOUND_MAX_PRICE_PER_UNIT=50]="L1_BOUND_MAX_PRICE_PER_UNIT",_[_.MAX_FEE=50]="MAX_FEE",_),eW={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},eG="v0_7",eX={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/".concat(eG),"https://free-rpc.nethermind.io/mainnet-juno/".concat(eG)],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/".concat(eG),"https://free-rpc.nethermind.io/sepolia-juno/".concat(eG)]},eJ=n(88368),e$=n(23659),ez={};function eZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.constructor,{captureStackTrace:n}=Error;n&&n(e,t)}function eQ(e,t){let{setPrototypeOf:n}=Object;n?n(e,t):e.__proto__=t}W(ez,{RpcChannel:()=>rI});var e0=class extends Error{constructor(e){super(e),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),eQ(this,new.target.prototype),eZ(this)}},e1=class extends e0{},e2=class extends e1{constructor(e,t){super(e),this.errorCode=t}},e6=class extends e1{constructor(e,t){super(e),this.errorCode=t}},e5={};W(e5,{BlockStatus:()=>ta,BlockTag:()=>tr,EntryPointType:()=>e7,Literal:()=>e8,RPC:()=>z,TransactionExecutionStatus:()=>tn,TransactionFinalityStatus:()=>tt,TransactionStatus:()=>te,TransactionType:()=>e9,TypedDataRevision:()=>ti.TypedDataRevision,Uint:()=>e4,ValidateType:()=>e3});var e3=((b=e3||{}).DEPLOY="DEPLOY",b.CALL="CALL",b.INVOKE="INVOKE",b),e4=((T=e4||{}).u8="core::integer::u8",T.u16="core::integer::u16",T.u32="core::integer::u32",T.u64="core::integer::u64",T.u128="core::integer::u128",T.u256="core::integer::u256",T.u512="core::integer::u512",T),e8=((A=e8||{}).ClassHash="core::starknet::class_hash::ClassHash",A.ContractAddress="core::starknet::contract_address::ContractAddress",A.Secp256k1Point="core::starknet::secp256k1::Secp256k1Point",A),e7=((w=e7||{}).EXTERNAL="EXTERNAL",w.L1_HANDLER="L1_HANDLER",w.CONSTRUCTOR="CONSTRUCTOR",w),e9=((C=e9||{}).DECLARE="DECLARE",C.DEPLOY="DEPLOY",C.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",C.INVOKE="INVOKE_FUNCTION",C),te=((k=te||{}).NOT_RECEIVED="NOT_RECEIVED",k.RECEIVED="RECEIVED",k.ACCEPTED_ON_L2="ACCEPTED_ON_L2",k.ACCEPTED_ON_L1="ACCEPTED_ON_L1",k.REJECTED="REJECTED",k.REVERTED="REVERTED",k),tt=((I=tt||{}).NOT_RECEIVED="NOT_RECEIVED",I.RECEIVED="RECEIVED",I.ACCEPTED_ON_L2="ACCEPTED_ON_L2",I.ACCEPTED_ON_L1="ACCEPTED_ON_L1",I),tn=((S=tn||{}).REJECTED="REJECTED",S.REVERTED="REVERTED",S.SUCCEEDED="SUCCEEDED",S),ta=((D=ta||{}).PENDING="PENDING",D.ACCEPTED_ON_L1="ACCEPTED_ON_L1",D.ACCEPTED_ON_L2="ACCEPTED_ON_L2",D.REJECTED="REJECTED",D),tr=((x=tr||{}).PENDING="pending",x.LATEST="latest",x),ti=n(18527);function ts(e,t){if(!e)throw Error(t||"Assertion failure")}var to={};W(to,{addPercent:()=>tk,assertInRange:()=>tm,bigNumberishArrayToDecimalStringArray:()=>tv,bigNumberishArrayToHexadecimalStringArray:()=>tE,cleanHex:()=>ty,getDecimalString:()=>tb,getHexString:()=>tT,getHexStringArray:()=>tA,hexToBytes:()=>tC,hexToDecimalString:()=>tg,isBigInt:()=>tu,isBoolean:()=>tS,isHex:()=>tl,isNumber:()=>tI,isStringWholeNumber:()=>t_,toBigInt:()=>td,toCairoBool:()=>tw,toHex:()=>th,toHexString:()=>tp,toStorageKey:()=>tf});var tc=n(88368);function tl(e){return/^0x[0-9a-f]*$/i.test(e)}function td(e){return BigInt(e)}function tu(e){return"bigint"==typeof e}function th(e){return ew(td(e).toString(16))}var tp=th;function tf(e){return ew(td(e).toString(16).padStart(64,"0"))}function tg(e){return BigInt(ew(e)).toString(10)}function ty(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function tm(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=BigInt(e),i=BigInt(t),s=BigInt(n);ts(r>=i&&r<=s,"Message not signable, ".concat(""===a?"invalid length":"invalid ".concat(a," length"),"."))}function tv(e){return e.map(e=>td(e).toString(10))}function tE(e){return e.map(e=>th(e))}function t_(e){return/^\d+$/.test(e)}function tb(e){if(tl(e))return tg(e);if(t_(e))return e;throw Error("".concat(e," needs to be a hex-string or whole-number-string"))}function tT(e){if(tl(e))return e;if(t_(e))return tp(e);throw Error("".concat(e," needs to be a hex-string or whole-number-string"))}function tA(e){return e.map(tT)}function tw(e){return(+e).toString()}function tC(e){if(!tl(e))throw Error("".concat(e," needs to be a hex-string"));let t=eA(e);return t.length%2!=0&&(t="0".concat(t)),(0,tc.hexToBytes)(t)}function tk(e,t){let n=BigInt(e);return n+n*BigInt(t)/100n}function tI(e){return"number"==typeof e}function tS(e){return"boolean"==typeof e}var tD={};W(tD,{getSelector:()=>tB,getSelectorFromName:()=>tO,keccakBn:()=>tV,starknetKeccak:()=>tN});var tx=n(72979);function tV(e){let t=eA(th(BigInt(e))),n=t.length%2==0?t:"0".concat(t);return ew((0,tx.keccak)(tC(ew(n))).toString(16))}function tN(e){return BigInt(ew((0,tx.keccak)(ev(e)).toString(16)))&eN}function tO(e){return th(tN(e))}function tB(e){return tl(e)?e:t_(e)?tp(e):tO(e)}var tR={};function tP(e){return/^[\x00-\x7F]*$/.test(e)}function tF(e){return e.length<=ex}function tM(e){return/^[0-9]*$/i.test(e)}function tL(e){return"string"==typeof e}function tH(e){return tL(e)&&!tl(e)&&!t_(e)}W(tR,{decodeShortString:()=>tY,encodeShortString:()=>tK,isASCII:()=>tP,isDecimalString:()=>tM,isLongText:()=>tj,isShortString:()=>tF,isShortText:()=>tU,isString:()=>tL,isText:()=>tH,splitLongString:()=>tq});var tU=e=>tH(e)&&tF(e),tj=e=>tH(e)&&!tF(e);function tq(e){let t=RegExp("[^]{1,".concat(ex,"}"),"g");return e.match(t)||[]}function tK(e){if(!tP(e))throw Error("".concat(e," is not an ASCII string"));if(!tF(e))throw Error("".concat(e," is too long"));return ew(e.replace(/./g,e=>e.charCodeAt(0).toString(16)))}function tY(e){if(!tP(e))throw Error("".concat(e," is not an ASCII string"));if(tl(e))return eA(e).replace(/.{2}/g,e=>String.fromCharCode(parseInt(e,16)));if(tM(e))return tY("0X".concat(BigInt(e).toString(16)));throw Error("".concat(e," is not Hex or decimal"))}var tW={};function tG(e){let t=0n===BigInt(e.pending_word)?"":tY(th(e.pending_word));return e.data.reduce((e,t)=>e+(0n===BigInt(t)?"":tY(th(t))),"")+t}function tX(e){let t=tq(e),n=t[t.length-1],a=t.map(tK),[r,i]=void 0===n||31===n.length?["0x00",0]:[a.pop(),n.length];return{data:0===a.length?[]:a,pending_word:r,pending_word_len:i}}W(tW,{byteArrayFromString:()=>tX,stringFromByteArray:()=>tG});var tJ={};function t$(e){if(tu(e)||Number.isInteger(e))return e.toString();if(tL(e)){if(tl(e))return BigInt(e).toString();if(tH(e)){if(!tF(e))throw Error("".concat(e," is a long string > 31 chars. Please split it into an array of short strings."));return BigInt(tK(e)).toString()}if(t_(e))return e}if(tS(e))return"".concat(+e);throw Error("".concat(e," can't be computed by felt()"))}W(tJ,{felt:()=>nC,getAbiContractVersion:()=>nb,getArrayType:()=>nv,isCairo1Abi:()=>nE,isCairo1Type:()=>nm,isLen:()=>t9,isTypeArray:()=>nt,isTypeBool:()=>nu,isTypeByteArray:()=>ng,isTypeBytes31:()=>nf,isTypeContractAddress:()=>nh,isTypeEnum:()=>ni,isTypeEthAddress:()=>np,isTypeFelt:()=>ne,isTypeLiteral:()=>nd,isTypeNamedTuple:()=>na,isTypeNonZero:()=>n_,isTypeOption:()=>ns,isTypeResult:()=>no,isTypeSecp256k1Point:()=>ny,isTypeStruct:()=>nr,isTypeTuple:()=>nn,isTypeUint:()=>nc,isTypeUint256:()=>nl,tuple:()=>nw,uint256:()=>nT,uint512:()=>nA});var tz=(1n<<128n)-1n,tZ=(1n<<256n)-1n,tQ=0n,t0=0xffffffffffffffffffffffffffffffffn,t1=0xffffffffffffffffffffffffffffffffn,t2=0n,t6=0n,t5=((M=class e{static validate(e){let t=BigInt(e);if(t<tQ)throw Error("bigNumberish is smaller than UINT_256_MIN");if(t>tZ)throw Error("bigNumberish is bigger than UINT_256_MAX");return t}static validateProps(e,t){let n=BigInt(e),a=BigInt(t);if(n<t2||n>t0)throw Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(a<t6||a>t1)throw Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:n,high:a}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:ew(this.low.toString(16)),high:ew(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[t$(this.low),t$(this.high)]}constructor(...t){if("object"==typeof t[0]&&1===t.length&&"low"in t[0]&&"high"in t[0]){let n=e.validateProps(t[0].low,t[0].high);this.low=n.low,this.high=n.high}else if(1===t.length){let n=e.validate(t[0]);this.low=n&tz,this.high=n>>128n}else if(2===t.length){let n=e.validateProps(t[0],t[1]);this.low=n.low,this.high=n.high}else throw Error("Incorrect constructor parameters")}}).abiSelector="core::integer::u256",M),t3=(1n<<512n)-1n,t4=0n,t8=0n,t7=((L=class e{static validate(e){let t=BigInt(e);if(t<t4)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(t>t3)throw Error("bigNumberish is bigger than UINT_512_MAX.");return t}static validateProps(e,t,n,a){let r=BigInt(e),i=BigInt(t),s=BigInt(n),o=BigInt(a);return[r,i,s,o].forEach((e,t)=>{if(e<t8||e>tz)throw Error("limb".concat(t," is not in the range of a u128 number"))}),{limb0:r,limb1:i,limb2:s,limb3:o}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:ew(this.limb0.toString(16)),limb1:ew(this.limb1.toString(16)),limb2:ew(this.limb2.toString(16)),limb3:ew(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[t$(this.limb0),t$(this.limb1),t$(this.limb2),t$(this.limb3)]}constructor(...t){if("object"==typeof t[0]&&1===t.length&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){let n=e.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(1===t.length){let n=e.validate(t[0]);this.limb0=n&tz,this.limb1=(n&tz<<128n)>>128n,this.limb2=(n&tz<<256n)>>256n,this.limb3=n>>384n}else if(4===t.length){let n=e.validateProps(t[0],t[1],t[2],t[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else throw Error("Incorrect Uint512 constructor parameters")}}).abiSelector="core::integer::u512",L),t9=e=>/_len$/.test(e),ne=e=>"felt"===e||"core::felt252"===e,nt=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),nn=e=>/^\(.*\)$/i.test(e),na=e=>/\(.*\)/i.test(e)&&e.includes(":"),nr=(e,t)=>e in t,ni=(e,t)=>e in t,ns=e=>e.startsWith("core::option::Option::"),no=e=>e.startsWith("core::result::Result::"),nc=e=>Object.values(e4).includes(e),nl=e=>t5.isAbiType(e),nd=e=>Object.values(e8).includes(e),nu=e=>"core::bool"===e,nh=e=>"core::starknet::contract_address::ContractAddress"===e,np=e=>"core::starknet::eth_address::EthAddress"===e,nf=e=>"core::bytes_31::bytes31"===e,ng=e=>"core::byte_array::ByteArray"===e,ny=e=>"core::starknet::secp256k1::Secp256k1Point"===e,nm=e=>e.includes("::"),nv=e=>nm(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function nE(e){let{cairo:t}=nb(e);if(void 0===t)throw Error("Unable to determine Cairo version");return"1"===t}function n_(e){return e.startsWith("core::zeroable::NonZero::")}function nb(e){if(e.find(e=>"interface"===e.type))return{cairo:"1",compiler:"2"};let t=e.find(e=>"function"===e.type&&(e.inputs.length||e.outputs.length));return t?nm((t.inputs.length?t.inputs:t.outputs)[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}:{cairo:void 0,compiler:void 0}}var nT=e=>new t5(e).toUint256DecimalString(),nA=e=>new t7(e).toUint512DecimalString(),nw=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{...t}};function nC(e){return t$(e)}var nk=class{unwrap(){let e=Object.entries(this.variant).find(e=>void 0!==e[1]);if(void 0!==e)return e[1]}activeVariant(){let e=Object.entries(this.variant).find(e=>void 0!==e[1]);return void 0===e?"":e[0]}constructor(e){let t=Object.values(e);if(0===t.length)throw Error("This Enum must have at least 1 variant");if(1!==t.filter(e=>void 0!==e).length)throw Error("This Enum must have exactly one active variant");this.variant=e}},nI=((V=nI||{})[V.Some=0]="Some",V[V.None=1]="None",V),nS=class{unwrap(){if(!this.None)return this.Some}isSome(){return void 0!==this.Some}isNone(){return!0===this.None}constructor(e,t){if(!(e in nI))throw Error("Wrong variant : should be CairoOptionVariant.Some or .None.");if(0===e){if(void 0===t)throw Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}},nD=((N=nD||{})[N.Ok=0]="Ok",N[N.Err=1]="Err",N),nx=class{unwrap(){if(void 0!==this.Ok)return this.Ok;if(void 0!==this.Err)return this.Err;throw Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return void 0!==this.Ok}isErr(){return void 0!==this.Err}constructor(e,t){if(!(e in nD))throw Error("Wrong variant : should be CairoResultVariant.Ok or .Err.");0===e?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}},nV={isBN:(e,t,n)=>{if(!tu(e[n]))throw Error("Data and formatter mismatch on ".concat(n,":").concat(t[n],", expected response data ").concat(n,":").concat(e[n]," to be BN instead it is ").concat(typeof e[n]))},unknown:(e,t,n)=>{throw Error("Unhandled formatter type on ".concat(n,":").concat(t[n]," for data ").concat(n,":").concat(e[n]))}},nN=class{methodInputsLength(e){return e.inputs.reduce((e,t)=>t9(t.name)?e:e+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}constructor(e){this.abi=e}},nO=class{methodInputsLength(e){return e.inputs.length}getMethod(e){return this.abi.find(e=>"interface"===e.type).items.find(t=>t.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>"interface"===e.type?e.items:e)}constructor(e){this.abi=e}};function nB(e){let t=e.find(e=>"interface"===e.type)?2:nE(e)?1:0;if(0===t||1===t)return new nN(e);if(2===t)return new nO(e);throw Error("Unsupported ABI version ".concat(t))}function nR(e,t,n){return"constructor"===e&&!n&&!t.length}function nP(e,t,n){for(let a=0,r=0;a<e.length;a++)if(e[a]===t)r++;else if(e[a]===n&&0==--r)return a;return Number.POSITIVE_INFINITY}function nF(e){return nm(e)?function(e){let t;let n=e.slice(1,-1),a=[],r=0;for(;r<n.length;){switch(!0){case"("===n[r]:t=r+nP(n.slice(r),"(",")")+1;break;case n.startsWith("core::result::Result::<",r)||n.startsWith("core::array::Array::<",r)||n.startsWith("core::option::Option::<",r):t=r+nP(n.slice(r),"<",">")+1;break;default:{let e=n.indexOf(",",r);t=-1!==e?e:Number.POSITIVE_INFINITY}}a.push(n.slice(r,t)),r=t+2}return a}(e):function(e){let{subTuple:t,result:n}=function(e){if(!e.includes("("))return{subTuple:[],result:e};let t=[],n="",a=0;for(;a<e.length;){if("("===e[a]){let r=1,i=a;for(a++;r;)")"===e[a]&&r--,"("===e[a]&&r++,a++;t.push(e.substring(i,a)),n+=" ",a--}else n+=e[a];a++}return{subTuple:t,result:n}}(e.replace(/\s/g,"").slice(1,-1)),a=n.split(",").map(e=>t.length?e.replace(" ",t.shift()):e);return na(e)&&(a=a.reduce((e,t)=>e.concat(function(e){let t=e.substring(0,e.indexOf(":")),n=e.substring(t.length+1);return{name:t,type:n}}(t)),[])),a}(e)}function nM(e,t){switch(!0){case t5.isAbiType(e):return new t5(t).toApiRequest();case t7.isAbiType(e):return new t7(t).toApiRequest();case nf(e):return tK(t.toString());case ny(e):{let e=eA(th(t)).padStart(128,"0"),n=nT(ew(e.slice(-64))),a=nT(ew(e.slice(0,-64)));return[t$(a.low),t$(a.high),t$(n.low),t$(n.high)]}default:return t$(t)}}function nL(e,t,n,a){if(void 0===e)throw Error("Missing parameter for type ".concat(t));if(Array.isArray(e)){let r=[];r.push(t$(e.length));let i=nv(t);return e.reduce((e,t)=>e.concat(nL(t,i,n,a)),r)}if(n[t]&&n[t].members.length){if(t5.isAbiType(t))return new t5(e).toApiRequest();if(t7.isAbiType(t))return new t7(e).toApiRequest();if("core::starknet::eth_address::EthAddress"===t)return nM(t,e);if("core::byte_array::ByteArray"===t)return function(e){let t=tX(e);return[t.data.length.toString(),...t.data.map(e=>e.toString()),t.pending_word.toString(),t.pending_word_len.toString()]}(e);let{members:r}=n[t];return r.reduce((t,r)=>t.concat(nL(e[r.name],r.type,n,a)),[])}if(nn(t))return(function(e,t){let n=nF(t),a=Object.values(e);if(a.length!==n.length)throw Error("ParseTuple: provided and expected abi tuple size do not match.\n      provided: ".concat(a," \n      expected: ").concat(n));return n.map((e,t)=>{var n;return{element:a[t],type:null!==(n=e.type)&&void 0!==n?n:e}})})(e,t).reduce((e,t)=>{let r=nL(t.element,t.type,n,a);return e.concat(r)},[]);if(t5.isAbiType(t))return new t5(e).toApiRequest();if(t7.isAbiType(t))return new t7(e).toApiRequest();if(ni(t,a)){let{variants:r}=a[t];if(ns(t)){if(e.isSome()){let t=r.find(e=>"Some"===e.name);if(void 0===t)throw Error("Error in abi : Option has no 'Some' variant.");let i=t.type;if("()"===i)return"0";let s=nL(e.unwrap(),i,n,a);return Array.isArray(s)?["0",...s]:["0",s]}return"1"}if(no(t)){if(e.isOk()){let t=r.find(e=>"Ok"===e.name);if(void 0===t)throw Error("Error in abi : Result has no 'Ok' variant.");let i=t.type;if("()"===i)return"0";let s=nL(e.unwrap(),i,n,a);return Array.isArray(s)?["0",...s]:["0",s]}let t=r.find(e=>"Err"===e.name);if(void 0===t)throw Error("Error in abi : Result has no 'Err' variant.");let i=t.type;if("()"===i)return"1";let s=nL(e.unwrap(),i,n,a);return Array.isArray(s)?["1",...s]:["1",s]}let i=e.activeVariant(),s=r.find(e=>e.name===i);if(void 0===s)throw Error("Not find in abi : Enum has no '".concat(i,"' variant."));let o=s.type,c=r.findIndex(e=>e.name===i);if("()"===o)return c.toString();let l=nL(e.unwrap(),o,n,a);return Array.isArray(l)?[c.toString(),...l]:[c.toString(),l]}if(n_(t))return nM(nv(t),e);if("object"==typeof e)throw Error("Parameter ".concat(e," do not align with abi parameter ").concat(t));return nM(t,e)}function nH(e,t,n,a){let{name:r,type:i}=t,{value:s}=e.next();switch(!0){case nt(i):if(!Array.isArray(s)&&!tH(s))throw Error("ABI expected parameter ".concat(r," to be array or long string, got ").concat(s));return tL(s)&&(s=tq(s)),nL(s,t.type,n,a);case n_(i):return nM(nv(i),s);case"core::starknet::eth_address::EthAddress"===i:return nM(i,s);case nr(i,n)||nn(i)||t5.isAbiType(i)||t5.isAbiType(i):case ni(i,a):return nL(s,i,n,a);default:return nM(i,s)}}function nU(e,t){switch(!0){case nu(e):return!!BigInt(t.next().value);case t5.isAbiType(e):return new t5(t.next().value,t.next().value).toBigInt();case t7.isAbiType(e):let n=t.next().value;return new t7(n,t.next().value,t.next().value,t.next().value).toBigInt();case"core::starknet::eth_address::EthAddress"===e:return BigInt(t.next().value);case"core::bytes_31::bytes31"===e:return tY(t.next().value);case ny(e):let a=eA(t.next().value).padStart(32,"0"),r=eA(t.next().value).padStart(32,"0"),i=eA(t.next().value).padStart(32,"0");return BigInt(ew(r+a+eA(t.next().value).padStart(32,"0")+i));default:return BigInt(t.next().value)}}function nj(e,t,n,a){if("()"===t.type)return{};if(t5.isAbiType(t.type))return new t5(e.next().value,e.next().value).toBigInt();if(t7.isAbiType(t.type)){let t=e.next().value;return new t7(t,e.next().value,e.next().value,e.next().value).toBigInt()}if(ng(t.type)){let t=[],n=BigInt(e.next().value);for(;t.length<n;)t.push(th(e.next().value));return tG({data:t,pending_word:th(e.next().value),pending_word_len:BigInt(e.next().value)})}if(nt(t.type)){let r=[],i={name:"",type:nv(t.type)},s=BigInt(e.next().value);for(;r.length<s;)r.push(nj(e,i,n,a));return r}if(n_(t.type))return nj(e,{name:"",type:nv(t.type)},n,a);if(n&&t.type in n&&n[t.type])return"core::starknet::eth_address::EthAddress"===t.type?nU(t.type,e):n[t.type].members.reduce((t,r)=>(t[r.name]=nj(e,r,n,a),t),{});if(a&&t.type in a&&a[t.type]){let r=Number(e.next().value),i=a[t.type].variants.reduce((t,i,s)=>(s===r?t[i.name]=nj(e,{name:"",type:i.type},n,a):t[i.name]=void 0,t),{});if(t.type.startsWith("core::option::Option")){let e=0===r?i.Some:void 0;return new nS(r,e)}if(t.type.startsWith("core::result::Result")){let e;return e=0===r?i.Ok:i.Err,new nx(r,e)}return new nk(i)}if(nn(t.type))return nF(t.type).reduce((t,r,i)=>{let s=(null==r?void 0:r.name)?r.name:i,o=(null==r?void 0:r.type)?r.type:r;return t[s]=nj(e,{name:s,type:o},n,a),t},{});if(nt(t.type)){let r=[],i={name:"",type:nv(t.type)},s=BigInt(e.next().value);for(;r.length<s;)r.push(nj(e,i,n,a));return r}return nU(t.type,e)}function nq(e,t,n,a,r){let{name:i,type:s}=t;switch(!0){case t9(i):return BigInt(e.next().value);case n&&s in n||nn(s):case a&&ni(s,a):return nj(e,t,n,a);case nt(s):if(nm(s))return nj(e,t,n,a);let o=[];if(r&&r["".concat(i,"_len")]){let s=r["".concat(i,"_len")];for(;o.length<s;)o.push(nj(e,{name:i,type:t.type.replace("*","")},n,a))}return o;case n_(s):return nj(e,t,n,a);default:return nU(s,e)}}var nK=(e,t)=>{if(ts(tL(e)||tI(e)||tu(e),"Validate: arg ".concat(t.name," should be a felt typed as (String, Number or BigInt)")),tL(e)&&!tl(e))return;let n=BigInt(e.toString(10));ts(n>=0n&&n<=2n**252n-1n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 2^252-1]"))},nY=(e,t)=>{ts(tL(e),"Validate: arg ".concat(t.name," should be a string.")),ts(e.length<32,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be a string of less than 32 characters."))},nW=(e,t)=>{ts(tL(e),"Validate: arg ".concat(t.name," should be a string."))},nG=(e,t)=>{let n;switch(tI(e)&&ts(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is to large to be typed as Number use (BigInt or String)"),ts(tL(e)||tI(e)||tu(e)||"object"==typeof e&&"low"in e&&"high"in e||"object"==typeof e&&["limb0","limb1","limb2","limb3"].every(t=>t in e),"Validate: arg ".concat(t.name," of cairo type ").concat(t.type," should be type (String, Number or BigInt), but is ").concat(typeof e," ").concat(e,".")),t.type){case"core::integer::u256":n=new t5(e).toBigInt();break;case"core::integer::u512":n=new t7(e).toBigInt();break;default:n=td(e)}switch(t.type){case"core::integer::u8":ts(n>=0n&&n<=255n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0 - 255]"));break;case"core::integer::u16":ts(n>=0n&&n<=65535n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 65535]"));break;case"core::integer::u32":ts(n>=0n&&n<=4294967295n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 4294967295]"));break;case"core::integer::u64":ts(n>=0n&&n<=2n**64n-1n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 2^64-1]"));break;case"core::integer::u128":ts(n>=0n&&n<=2n**128n-1n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 2^128-1]"));break;case"core::integer::u256":ts(n>=0n&&n<=2n**256n-1n,"Validate: arg ".concat(t.name," is ").concat(t.type," 0 - 2^256-1"));break;case"core::integer::u512":ts(t7.is(n),"Validate: arg ".concat(t.name," is ").concat(t.type," 0 - 2^512-1"));break;case"core::starknet::class_hash::ClassHash":case"core::starknet::contract_address::ContractAddress":ts(n>=0n&&n<=2n**252n-1n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 2^252-1]"));break;case"core::starknet::secp256k1::Secp256k1Point":ts(n>=0n&&n<=2n**512n-1n,"Validate: arg ".concat(t.name," must be ").concat(t.type," : a 512 bits number."))}},nX=(e,t)=>{ts(tS(e),"Validate: arg ".concat(t.name," of cairo type ").concat(t.type," should be type (Boolean)"))},nJ=(e,t,n)=>{if("core::integer::u256"===t.type||"core::integer::u512"===t.type){nG(e,t);return}if("core::starknet::eth_address::EthAddress"===t.type){ts("object"!=typeof e,"EthAddress type is waiting a BigNumberish. Got ".concat(e));let n=BigInt(e.toString(10));ts(n>=0n&&n<=2n**160n-1n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 2^160-1]"));return}ts("object"==typeof e&&!Array.isArray(e),"Validate: arg ".concat(t.name," is cairo type struct (").concat(t.type,"), and should be defined as js object (not array)")),n[t.type].members.forEach(n=>{let{name:a}=n;ts(Object.keys(e).includes(a),"Validate: arg ".concat(t.name," should have a property ").concat(a))})},n$=(e,t)=>{ts("object"==typeof e&&!Array.isArray(e),"Validate: arg ".concat(t.name," is cairo type Enum (").concat(t.type,"), and should be defined as js object (not array)"));let n=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),a=[...Object.getOwnPropertyNames(e),...n];if(!(ns(t.type)&&a.includes("isSome")&&a.includes("isNone")||no(t.type)&&a.includes("isOk")&&a.includes("isErr")||a.includes("variant")&&a.includes("activeVariant")))throw Error("Validate Enum: argument ".concat(t.name,", type ").concat(t.type,", value received ").concat(e,", is not an Enum."))},nz=(e,t)=>{ts("object"==typeof e&&!Array.isArray(e),"Validate: arg ".concat(t.name," should be a tuple (defined as object)"))},nZ=(e,t,n,a)=>{let r=nv(t.type);if(!(ne(r)&&tj(e)))switch(ts(Array.isArray(e),"Validate: arg ".concat(t.name," should be an Array")),!0){case ne(r):e.forEach(e=>nK(e,t));break;case nn(r):e.forEach(e=>nz(e,{name:t.name,type:r}));break;case nt(r):e.forEach(e=>nZ(e,{name:"",type:r},n,a));break;case nr(r,n):e.forEach(e=>nJ(e,{name:t.name,type:r},n));break;case ni(r,a):e.forEach(e=>n$(e,{name:t.name,type:r}));break;case nc(r)||nd(r):e.forEach(e=>nG(e,{name:"",type:r}));break;case nu(r):e.forEach(e=>nX(e,t));break;default:throw Error("Validate Unhandled: argument ".concat(t.name,", type ").concat(t.type,", value ").concat(e))}},nQ=(e,t)=>{let n=nv(t.type);switch(ts(nc(n)&&n!==t7.abiSelector||ne(n),"Validate: ".concat(t.name," type is not authorized for NonZero type.")),!0){case ne(n):nK(e,t),ts(BigInt(e.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case nc(n):(nG(e,{name:"",type:n}),"core::integer::u256"===t.type)?ts(new t5(e).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):ts(td(e)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw Error("Validate Unhandled: argument ".concat(t.name,", type ").concat(t.type,", value ").concat(e))}};function n0(e,t,n,a){e.inputs.reduce((e,r)=>{let i=t[e];switch(!0){case t9(r.name):return e;case ne(r.type):nK(i,r);break;case nf(r.type):nY(i,r);break;case nc(r.type)||nd(r.type):nG(i,r);break;case nu(r.type):nX(i,r);break;case ng(r.type):nW(i,r);break;case nt(r.type):nZ(i,r,n,a);break;case nr(r.type,n):nJ(i,r,n);break;case ni(r.type,a):n$(i,r);break;case nn(r.type):nz(i,r);break;case n_(r.type):nQ(i,r);break;default:throw Error("Validate Unhandled: argument ".concat(r.name,", type ").concat(r.type,", value ").concat(i))}return e+1},0)}var n1=class e{validate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];"DEPLOY"!==e&&ts(this.abi.filter(t=>{if("function"!==t.type)return!1;let n="view"===t.stateMutability||"view"===t.state_mutability;return"INVOKE"===e?!n:n}).map(e=>e.name).includes(t),"".concat("INVOKE"===e?"invocable":"viewable"," method not found in abi"));let a=this.abi.find(n=>"DEPLOY"===e?n.name===t&&"constructor"===n.type:n.name===t&&"function"===n.type);if(nR(t,n,a))return;let r=this.parser.methodInputsLength(a);if(n.length!==r)throw Error("Invalid number of arguments, expected ".concat(r," arguments, but got ").concat(n.length));n0(a,n,this.structs,this.enums)}compile(e,t){let n;let a=this.abi.find(t=>t.name===e);if(nR(e,t,a))return[];Array.isArray(t)?n=t:(n=Object.values(function(e,t,n,a){let r=(e,t)=>{if(nt(t))return function(e,t){let n=nv(t);return tL(e)?e:e.map(e=>r(e,n))}(e,t);if(ni(t,a))return s(e,a[t]);if(nn(t))return nF(t).reduce((t,n,a)=>{var i;let s=Object.keys(e),o=(null==n?void 0:n.type)?n.type:n;return i=r(e[s[a]],o),Object.defineProperty(t,a.toString(),{enumerable:!0,value:null!=i?i:e[s[a]]}),t},{});if(np(t)||n_(t)||ng(t)||ny(t))return e;if(t5.isAbiType(t)){if("object"!=typeof e)return e;if(!("low"in e&&"high"in e))throw Error("Your object includes the property : ".concat(t,", containing an Uint256 object without the 'low' and 'high' keys."));return{low:e.low,high:e.high}}if(t7.isAbiType(t)){if("object"!=typeof e)return e;if(!["limb0","limb1","limb2","limb3"].every(t=>t in e))throw Error("Your object includes the property : ".concat(t,", containing an Uint512 object without the 'limb0' to 'limb3' keys."));return{limb0:e.limb0,limb1:e.limb1,limb2:e.limb2,limb3:e.limb3}}return nr(t,n)?i(e,n[t].members):e},i=(e,t)=>t.reduce((t,n)=>{var a;if("undefined"===e[n.name]&&(nm(n.type)||!t9(n.name)))throw Error("Your object needs a property with key : ".concat(n.name," ."));return a=r(e[n.name],n.type),Object.defineProperty(t,n.name,{enumerable:!0,value:null!=a?a:e[n.name]}),t},{}),s=(e,t)=>{if(no(t.name)){let n=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(",")),a=t.name.substring(t.name.indexOf(",")+1,t.name.lastIndexOf(">"));return e.isOk()?new nx(0,r(e.unwrap(),n)):new nx(1,r(e.unwrap(),a))}if(ns(t.name)){let n=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(">"));return e.isSome()?new nS(0,r(e.unwrap(),n)):new nS(1,{})}return new nk(Object.fromEntries(Object.entries(e.variant).map(n=>{if(void 0===n[1])return n;let a=t.type.substring(t.type.lastIndexOf("<")+1,t.type.lastIndexOf(">"));return"()"===a?n:[n[0],r(e.unwrap(),a)]})))};return t.reduce((t,n)=>{var a;return t9(n.name)&&!nm(n.type)||(a=r(e[n.name],n.type),Object.defineProperty(t,n.name,{enumerable:!0,value:a})),t},{})}(t,a.inputs,this.structs,this.enums)),n0(a,n,this.structs,this.enums));let r=n[Symbol.iterator](),i=a.inputs.reduce((e,t)=>t9(t.name)&&!nm(t.type)?e:e.concat(nH(r,t,this.structs,this.enums)),[]);return Object.defineProperty(i,"__compiled__",{enumerable:!1,writable:!1,value:!0}),i}static compile(e){let t;let n=e=>{let t=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",a=Array.isArray(e)?[e.length.toString(),...e]:e;return Object.entries(a).flatMap(e=>{let[r,i]=e,s=i;"entrypoint"===r?s=tO(s):tj(s)&&(s=tX(s));let o=Array.isArray(a)&&"0"===r?"$$len":r;if(tu(s))return[["".concat(n).concat(o),t$(s)]];if(Object(s)===s){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(s)),a=[...Object.getOwnPropertyNames(s),...e];if(a.includes("isSome")&&a.includes("isNone")){let e=s,a=e.isSome()?0:1;return e.isSome()?t({0:a,1:e.unwrap()},"".concat(n).concat(o,".")):[["".concat(n).concat(o),t$(a)]]}if(a.includes("isOk")&&a.includes("isErr")){let e=s;return t({0:e.isOk()?0:1,1:e.unwrap()},"".concat(n).concat(o,"."))}if(a.includes("variant")&&a.includes("activeVariant")){let e=s,a=e.activeVariant(),r=Object.keys(e.variant).findIndex(e=>e===a);return"object"==typeof e.unwrap()&&0===Object.keys(e.unwrap()).length?[["".concat(n).concat(o),t$(r)]]:t({0:r,1:e.unwrap()},"".concat(n).concat(o,"."))}return t(s,"".concat(n).concat(o,"."))}return[["".concat(n).concat(o),t$(s)]]})};return Object.fromEntries(t(e))};return Object.defineProperty(t=Array.isArray(e)?Object.values(n({...e})):Object.values(n(e)),"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}parse(e,t){let{outputs:n}=this.abi.find(t=>t.name===e),a=t.flat()[Symbol.iterator](),r=n.flat().reduce((e,t,n)=>{var r;let i=null!==(r=t.name)&&void 0!==r?r:n;return e[i]=nq(a,t,this.structs,this.enums,e),e[i]&&e["".concat(i,"_len")]&&delete e["".concat(i,"_len")],e},{});return 1===Object.keys(r).length&&0 in r?r[0]:r}format(e,t,n){return function e(t,n,a){return Object.entries(t).reduce((r,i)=>{let[s,o]=i,c=null!=a?a:n[s];if(!(s in n)&&!a)return r[s]=o,r;if("string"===c){if(Array.isArray(t[s])){let n=e(t[s],t[s].map(e=>c));return r[s]=Object.values(n).join(""),r}return nV.isBN(t,n,s),r[s]=tY(o),r}if("number"===c)return nV.isBN(t,n,s),r[s]=Number(o),r;if("function"==typeof c)return r[s]=c(o),r;if(Array.isArray(c)){let n=e(t[s],c,c[0]);return r[s]=Object.values(n),r}return"object"==typeof c?r[s]=e(t[s],c):nV.unknown(t,n,s),r},{})}(this.parse(e,t),n)}static getAbiStruct(e){return e.filter(e=>"struct"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{})}static getAbiEnum(e){let t=e.filter(e=>"enum"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{});return delete t["core::bool"],t}static toCalldata(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.compile(t)}static toHex(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.compile(t).map(e=>th(e))}decodeParameters(e,t){let n=Array.isArray(e)?e:[e],a=t.flat()[Symbol.iterator](),r=n.map(e=>nq(a,{name:"",type:e},this.structs,this.enums));return 1===r.length?r[0]:r}constructor(t){this.structs=e.getAbiStruct(t),this.enums=e.getAbiEnum(t),this.parser=nB(t),this.abi=this.parser.getLegacyFormat()}},n2={};W(n2,{calculateContractAddressFromHash:()=>aV,calculateDeclareTransactionHash:()=>ay,calculateDeployAccountTransactionHash:()=>am,calculateInvokeTransactionHash:()=>ag,computeCompiledClassHash:()=>aM,computeContractClassHash:()=>aU,computeHashOnElements:()=>aS,computeHintedClassHash:()=>aB,computeLegacyContractClassHash:()=>aR,computePedersenHash:()=>ak,computePedersenHashOnElements:()=>aD,computePoseidonHash:()=>aI,computePoseidonHashOnElements:()=>ax,computeSierraContractClassHash:()=>aH,formatSpaces:()=>aO,getSelector:()=>tB,getSelectorFromName:()=>tO,hashByteCodeSegments:()=>aF,keccakBn:()=>tV,poseidon:()=>n6,starknetKeccak:()=>tN});var n6=X(n(97757)),n5={};W(n5,{calculateDeclareTransactionHash:()=>ae,calculateDeployAccountTransactionHash:()=>at,calculateTransactionHash:()=>an,calculateTransactionHashCommon:()=>n9,computeHashOnElements:()=>n7});var n3={};W(n3,{starkCurve:()=>n4,weierstrass:()=>n8});var n4=X(n(72979)),n8=X(n(83462));function n7(e){return[...e,e.length].reduce((e,t)=>n4.pedersen(td(e),td(t)),0).toString()}function n9(e,t,n,a,r,i,s){let o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],c=[e,t,n,a,n7(r),i,s,...o];return n7(c)}function ae(e,t,n,a,r,i,s){return n9("0x6465636c617265",n,t,0,[e],a,r,[i,...s?[s]:[]])}function at(e,t,n,a,r,i,s,o){return n9("0x6465706c6f795f6163636f756e74",r,e,0,[t,a,...n],i,s,[o])}function an(e,t,n,a,r,i){return n9("0x696e766f6b65",t,e,0,n,a,r,[i])}var aa={};W(aa,{calculateDeclareTransactionHash:()=>ap,calculateDeployAccountTransactionHash:()=>ah,calculateInvokeTransactionHash:()=>af,calculateTransactionHashCommon:()=>au,hashDAMode:()=>al,hashFeeField:()=>ad});var ar=n(72979),ai=e=>e.map(e=>BigInt(e)),as=64n+128n,ao=BigInt(tK("L1_GAS")),ac=BigInt(tK("L2_GAS"));function al(e,t){return(BigInt(e)<<32n)+BigInt(t)}function ad(e,t){let n=(ao<<as)+(BigInt(t.l1_gas.max_amount)<<128n)+BigInt(t.l1_gas.max_price_per_unit),a=(ac<<as)+(BigInt(t.l2_gas.max_amount)<<128n)+BigInt(t.l2_gas.max_price_per_unit);return(0,ar.poseidonHashMany)([BigInt(e),n,a])}function au(e,t,n,a,r,i,s,o,c,l){let d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:[],u=ad(i,l),h=al(o,c),p=ai([e,t,n,u,(0,ar.poseidonHashMany)(ai(s)),a,r,h,...ai(d)]);return th((0,ar.poseidonHashMany)(p))}function ah(e,t,n,a,r,i,s,o,c,l,d,u){return au("0x6465706c6f795f6163636f756e74",r,e,i,s,d,u,o,c,l,[(0,ar.poseidonHashMany)(ai(n)),t,a])}function ap(e,t,n,a,r,i,s,o,c,l,d,u){return au("0x6465636c617265",a,n,r,i,d,ai(u),o,c,l,[(0,ar.poseidonHashMany)(ai(s)),e,t])}function af(e,t,n,a,r,i,s,o,c,l,d){return au("0x696e766f6b65",t,e,a,r,l,d,s,o,c,[(0,ar.poseidonHashMany)(ai(i)),(0,ar.poseidonHashMany)(ai(n))])}function ag(e){return[z.ETransactionVersion.V3,z.ETransactionVersion.F3].includes(e.version)?af(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):an(e.senderAddress,e.version,e.compiledCalldata,e.maxFee,e.chainId,e.nonce)}function ay(e){return[z.ETransactionVersion.V3,z.ETransactionVersion.F3].includes(e.version)?ap(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):ae(e.classHash,e.senderAddress,e.version,e.maxFee,e.chainId,e.nonce,e.compiledClassHash)}function am(e){return[z.ETransactionVersion.V3,z.ETransactionVersion.F3].includes(e.version)?ah(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):at(e.contractAddress,e.classHash,e.constructorCalldata,e.salt,e.version,e.maxFee,e.chainId,e.nonce)}var av=n(72979),aE={};W(aE,{parse:()=>aT,parseAlwaysAsBig:()=>aA,stringify:()=>aw,stringifyAlwaysAsBig:()=>aC});var a_=X(n(94758)),ab=e=>{if(!a_.isInteger(e))return parseFloat(e);let t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},aT=e=>a_.parse(String(e),void 0,ab),aA=e=>a_.parse(String(e),void 0,a_.parseNumberAndBigInt),aw=(e,t,n,a)=>a_.stringify(e,t,n,a),aC=aw;function ak(e,t){return n4.pedersen(BigInt(e),BigInt(t))}function aI(e,t){return th(n4.poseidonHash(BigInt(e),BigInt(t)))}function aS(e){return[...e,e.length].reduce((e,t)=>n4.pedersen(BigInt(e),BigInt(t)),0).toString()}var aD=aS;function ax(e){return th((0,av.poseidonHashMany)(e.map(e=>BigInt(e))))}function aV(e,t,n,a){let r=aS(n1.compile(n));return th(BigInt(aS([t$("0x535441524b4e45545f434f4e54524143545f41444452455353"),a,e,t,r]))%eP)}function aN(e,t){return"attributes"===e||"accessible_scopes"===e?Array.isArray(t)&&0===t.length?void 0:t:"debug_info"===e?null:null===t?void 0:t}function aO(e){let t=!1,n=[];for(let a of e)'"'===a&&!1==(n.length>0&&"\\"===n.slice(-1)[0])&&(t=!t),t?n.push(a):n.push(":"===a?": ":","===a?", ":a);return n.join("")}function aB(e){let{abi:t,program:n}=e,a=aO(aw({abi:t,program:n},aN));return ew(n4.keccak(ev(a)).toString(16))}function aR(e){let t=tL(e)?aT(e):e,n=th(eO),a=aS(t.entry_points_by_type.EXTERNAL.flatMap(e=>[e.selector,e.offset])),r=aS(t.entry_points_by_type.L1_HANDLER.flatMap(e=>[e.selector,e.offset])),i=aS(t.entry_points_by_type.CONSTRUCTOR.flatMap(e=>[e.selector,e.offset])),s=aS(t.program.builtins.map(e=>tK(e))),o=aB(t),c=aS(t.program.data);return aS([n,a,r,i,s,o,c])}function aP(e){let t=e.flatMap(e=>{var t;return[BigInt(e.selector),BigInt(e.offset),(t=e.builtins,(0,av.poseidonHashMany)(t.flatMap(e=>BigInt(tK(e)))))]});return(0,av.poseidonHashMany)(t)}function aF(e){var t;let n=e.bytecode.map(e=>BigInt(e)),a=null!==(t=e.bytecode_segment_lengths)&&void 0!==t?t:[],r=0,i=a.flatMap(e=>{let t=n.slice(r,r+=e);return[BigInt(e),(0,av.poseidonHashMany)(t)]});return 1n+(0,av.poseidonHashMany)(i)}function aM(e){let t=BigInt(tK("COMPILED_CLASS_V1")),n=aP(e.entry_points_by_type.EXTERNAL),a=aP(e.entry_points_by_type.L1_HANDLER),r=aP(e.entry_points_by_type.CONSTRUCTOR),i=e.bytecode_segment_lengths?aF(e):(0,av.poseidonHashMany)(e.bytecode.map(e=>BigInt(e)));return th((0,av.poseidonHashMany)([t,n,a,r,i]))}function aL(e){let t=e.flatMap(e=>[BigInt(e.selector),BigInt(e.function_idx)]);return(0,av.poseidonHashMany)(t)}function aH(e){let t=BigInt(tK("CONTRACT_CLASS_V0.1.0")),n=aL(e.entry_points_by_type.EXTERNAL),a=aL(e.entry_points_by_type.L1_HANDLER),r=aL(e.entry_points_by_type.CONSTRUCTOR),i=function(e){let t=aO(aw(e.abi,null));return BigInt(ew(n4.keccak(ev(t)).toString(16)))}(e),s=(0,av.poseidonHashMany)(e.sierra_program.map(e=>BigInt(e)));return th((0,av.poseidonHashMany)([t,n,a,r,i,s]))}function aU(e){let t=tL(e)?aT(e):e;return"sierra_program"in t?aH(t):aR(t)}var aj={};W(aj,{compressProgram:()=>aY,decompressProgram:()=>aW,estimateFeeToBounds:()=>aQ,estimatedFeeToMaxFee:()=>aZ,formatSignature:()=>aJ,intDAM:()=>a0,makeAddress:()=>aX,randomAddress:()=>aG,reduceV2:()=>a5,signatureToDecimalArray:()=>a$,signatureToHexArray:()=>az,toFeeVersion:()=>a2,toTransactionVersion:()=>a1,v3Details:()=>a6});var aq=n(72979),aK=n(71821);function aY(e){let t=tL(e)?e:aw(e);return eb((0,aK.gzip)(t))}function aW(e){return Array.isArray(e)?e:aT(em((0,aK.ungzip)(e_(e))))}function aG(){let e=aq.utils.randomPrivateKey();return(0,aq.getStarkKey)(e)}function aX(e){return ew(e).toLowerCase()}function aJ(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(e=>th(e));try{let{r:t,s:n}=e;return[th(t),th(n)]}catch(e){throw Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function a$(e){return tv(aJ(e))}function az(e){return tE(aJ(e))}function aZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return tk(e,t)}function aQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;if(tu(e))return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}};if(void 0===e.gas_consumed||void 0===e.gas_price)throw Error("estimateFeeToBounds: estimate is undefined");return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:void 0!==e.data_gas_consumed&&void 0!==e.data_gas_price?th(tk(BigInt(e.overall_fee)/BigInt(e.gas_price),t)):th(tk(e.gas_consumed,t)),max_price_per_unit:th(tk(e.gas_price,n))}}}function a0(e){if(e===z.EDataAvailabilityMode.L1)return z.EDAMode.L1;if(e===z.EDataAvailabilityMode.L2)return z.EDAMode.L2;throw Error("EDAM conversion")}function a1(e,t){let n=t?th(t):void 0,a=th(e);if(t&&!Object.values(z.ETransactionVersion).includes(n))throw Error("providedVersion ".concat(t," is not ETransactionVersion"));if(!Object.values(z.ETransactionVersion).includes(a))throw Error("defaultVersion ".concat(e," is not ETransactionVersion"));return t?n:a}function a2(e){if(!e)return;let t=th(e);if(t===z.ETransactionVersion.V0)return z.ETransactionVersion.F0;if(t===z.ETransactionVersion.V1)return z.ETransactionVersion.F1;if(t===z.ETransactionVersion.V2)return z.ETransactionVersion.F2;if(t===z.ETransactionVersion.V3)return z.ETransactionVersion.F3;throw Error("toFeeVersion: ".concat(t," is not supported"))}function a6(e){var t;return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||z.EDataAvailabilityMode.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||z.EDataAvailabilityMode.L1,resourceBounds:null!==(t=e.resourceBounds)&&void 0!==t?t:aQ(eV)}}function a5(e){return e===z.ETransactionVersion.F2?z.ETransactionVersion.F1:e===z.ETransactionVersion.V2?z.ETransactionVersion.V1:e}function a3(e){return"sierra_program"in(tL(e)?aT(e):e)}function a4(e){var t;let n={...e};if(a3(e.contract)&&(!e.compiledClassHash&&e.casm&&(n.compiledClassHash=aM(e.casm)),!n.compiledClassHash))throw Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(n.classHash=null!==(t=e.classHash)&&void 0!==t?t:aU(e.contract),!n.classHash)throw Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return n}function a8(e){if(a3(e))throw Error("ContractClassResponse need to be LegacyContractClass (cairo0 response class)");return{...e,program:aW(e.program)}}var a7={};W(a7,{ethRandomPrivateKey:()=>re,validateAndParseEthAddress:()=>rt});var a9=n(44390);function re(){return eS(eT(a9.secp256k1.utils.randomPrivateKey()))}function rt(e){tm(e,eV,2n**160n-1n,"Ethereum Address ");let t=ew(eA(th(e)).padStart(40,"0"));return ts(!!t.match(/^(0x)?[0-9a-f]{40}$/),"Invalid Ethereum Address Format"),t}var rn=X(n(6855)),ra=X(n(25596)),rr=window.fetch||void 0!==n.g&&(0,rn.default)(n.g.fetch)||ra.default,ri={};function rs(e){return new Promise(t=>{setTimeout(t,e)})}function ro(e){let t={...e};return delete t.sierra_program_debug_info,t.abi=aO(aw(e.abi)),t.sierra_program=aO(aw(e.sierra_program)),t.sierra_program=aY(t.sierra_program),t}function rc(e){let t=tL(e)?aT(e):e;return a3(e)?ro(t):{...t,..."program"in t&&{program:aY(t.program)}}}W(ri,{Block:()=>ru,createSierraContractClass:()=>ro,getDefaultNodeUrl:()=>rl,isPendingBlock:()=>rf,isPendingStateUpdate:()=>ry,isPendingTransaction:()=>rg,isV3Tx:()=>rh,isVersion:()=>rp,parseContract:()=>rc,validBlockTags:()=>rd,wait:()=>rs});var rl=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||console.warn("Using default public node url, please provide nodeUrl in provider options!");let n=eX[null!=e?e:"SN_SEPOLIA"],a=Math.floor(Math.random()*n.length);return n[a]},rd=Object.values(tr),ru=class{setIdentifier(e){if(tL(e)){if(tM(e))this.number=parseInt(e,10);else if(tl(e))this.hash=e;else if(rd.includes(e))this.tag=e;else throw TypeError("Block identifier unmanaged: ".concat(e))}else tu(e)?this.hash=th(e):tI(e)?this.number=e:this.tag="pending";if(tI(this.number)&&this.number<0)throw TypeError("Block number (".concat(this.number,") can't be negative"))}get queryIdentifier(){return null!==this.number?"blockNumber=".concat(this.number):null!==this.hash?"blockHash=".concat(this.hash):"blockNumber=".concat(this.tag)}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}constructor(e){this.hash=null,this.number=null,this.tag=null,this.valueOf=()=>this.number,this.toString=()=>this.hash,this.setIdentifier(e)}};function rh(e){let t=e.version?th(e.version):z.ETransactionVersion.V3;return t===z.ETransactionVersion.V3||t===z.ETransactionVersion.F3}function rp(e,t){let[n,a]=e.split("."),[r,i]=t.split(".");return n===r&&a===i}function rf(e){return"PENDING"===e.status}function rg(e){return!("block_hash"in e)}function ry(e){return!("block_hash"in e)}var rm={};W(rm,{buildUDCCall:()=>rw,fromCallsToExecuteCalldata:()=>rE,fromCallsToExecuteCalldataWithNonce:()=>r_,fromCallsToExecuteCalldata_cairo1:()=>rT,getExecuteCalldata:()=>rA,getVersionsByType:()=>rC,transformCallsToMulticallArrays:()=>rv,transformCallsToMulticallArrays_cairo1:()=>rb});var rv=e=>{let t=[],n=[];return e.forEach(e=>{let a=n1.compile(e.calldata||[]);t.push({to:td(e.contractAddress).toString(10),selector:td(tO(e.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:a.length.toString()}),n.push(...a)}),{callArray:t,calldata:n1.compile({calldata:n})}},rE=e=>{let{callArray:t,calldata:n}=rv(e);return[...n1.compile({callArray:t}),...n]},r_=(e,t)=>[...rE(e),td(t).toString()],rb=e=>e.map(e=>({to:td(e.contractAddress).toString(10),selector:td(tO(e.entrypoint)).toString(10),calldata:n1.compile(e.calldata||[])})),rT=e=>{let t=e.map(e=>({contractAddress:e.contractAddress,entrypoint:e.entrypoint,calldata:Array.isArray(e.calldata)&&"__compiled__"in e.calldata?e.calldata:n1.compile(e.calldata)}));return n1.compile({orderCalls:t})},rA=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";return"1"===t?rT(e):rE(e)};function rw(e,t){let n=[].concat(e).map(e=>{let{classHash:n,salt:a,unique:r=!0,constructorCalldata:i=[]}=e,s=n1.compile(i),o=null!=a?a:aG();return{call:{contractAddress:eW.ADDRESS,entrypoint:eW.ENTRYPOINT,calldata:[n,o,tw(r),s.length,...s]},address:aV(r?n4.pedersen(t,o):o,n,s,r?eW.ADDRESS:0)}});return{calls:n.map(e=>e.call),addresses:n.map(e=>e.address)}}function rC(e){return"fee"===e?{v1:z.ETransactionVersion.F1,v2:z.ETransactionVersion.F2,v3:z.ETransactionVersion.F3}:{v1:z.ETransactionVersion.V1,v2:z.ETransactionVersion.V2,v3:z.ETransactionVersion.V3}}var rk={headers:{"Content-Type":"application/json"},blockIdentifier:"pending",retries:200},rI=class{setChainId(e){this.chainId=e}fetch(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return rr(this.nodeUrl,{method:"POST",body:aw(a),headers:this.headers})}errorHandler(e,t,n,a){if(n){let{code:a,message:r,data:i}=n;throw new e1("RPC: ".concat(e," with params ").concat(aw(t,null,2),"\n\n        ").concat(a,": ").concat(r,": ").concat(aw(i)))}if(a instanceof e1)throw a;if(a)throw Error(a.message)}async fetchEndpoint(e,t){try{let n=await this.fetch(e,t,this.requestId+=1),{error:a,result:r}=await n.json();return this.errorHandler(e,t,a),r}catch(a){var n;throw this.errorHandler(e,t,null==a?void 0:null===(n=a.response)||void 0===n?void 0:n.data,a),a}}async getChainId(){var e;return null!==(e=this.chainId)&&void 0!==e||(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}async getSpecVersion(){var e;return null!==(e=this.specVersion)&&void 0!==e||(this.specVersion=await this.fetchEndpoint("starknet_specVersion")),this.specVersion}getNonceForAddress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=th(e),a=new ru(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:a})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new ru(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new ru(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockStateUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new ru(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new ru(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new ru(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=th(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let n=new ru(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){let t=th(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=th(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=th(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{blockIdentifier:n=this.blockIdentifier,skipValidate:a=!0,skipFeeCharge:r=!0}=t,i=new ru(n).identifier,s=[];return a&&s.push(Q.ESimulationFlag.SKIP_VALIDATE),r&&s.push(Q.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s})}async waitForTransaction(e,t){var n,a,r;let i;let s=th(e),{retries:o}=this,c=!1,l=!1,d=null!==(n=null==t?void 0:t.retryInterval)&&void 0!==n?n:5e3,u=null!==(a=null==t?void 0:t.errorStates)&&void 0!==a?a:[Q.ETransactionStatus.REJECTED],h=null!==(r=null==t?void 0:t.successStates)&&void 0!==r?r:[Q.ETransactionExecutionStatus.SUCCEEDED,Q.ETransactionStatus.ACCEPTED_ON_L2,Q.ETransactionStatus.ACCEPTED_ON_L1];for(;!c;){await rs(d);try{let e=(i=await this.getTransactionStatus(s)).execution_status,t=i.finality_status;if(!t)throw Error("waiting for transaction status");if(u.includes(e)||u.includes(t)){let n="".concat(e,": ").concat(t),a=Error(n);throw a.response=i,l=!0,a}(h.includes(e)||h.includes(t))&&(c=!0)}catch(e){if(e instanceof Error&&l)throw e;if(o<=0)throw Error("waitForTransaction timed-out with retries ".concat(this.retries))}o-=1}let p=null;for(;null===p;){try{p=await this.getTransactionReceipt(s)}catch(e){if(o<=0)throw Error("waitForTransaction timed-out with retries ".concat(this.retries))}o-=1,await rs(d)}return p}getStorageAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.blockIdentifier,a=th(e),r=tf(t),i=new ru(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:a,key:r,block_id:i})}getClassHashAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=th(e),a=new ru(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:a,contract_address:n})}getClass(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=th(e),a=new ru(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:a})}getClassAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=th(e),a=new ru(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:a,contract_address:n})}async getEstimateFee(e,t){let{blockIdentifier:n=this.blockIdentifier,skipValidate:a=!0}=t,r=new ru(n).identifier,i={};return rp("0.5",await this.getSpecVersion())||(i={simulation_flags:a?[Q.ESimulationFlag.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:r,...i})}async invoke(e,t){let n;return n=rh(t)?this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:Q.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:n1.toHex(e.calldata),version:Q.ETransactionVersion.V3,signature:az(e.signature),nonce:th(t.nonce),resource_bounds:t.resourceBounds,tip:th(t.tip),paymaster_data:t.paymasterData.map(e=>th(e)),account_deployment_data:t.accountDeploymentData.map(e=>th(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:n1.toHex(e.calldata),type:Q.ETransactionType.INVOKE,max_fee:th(t.maxFee||0),version:Q.ETransactionVersion.V1,signature:az(e.signature),nonce:th(t.nonce)}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare(e,t){let n,{contract:a,signature:r,senderAddress:i,compiledClassHash:s}=e;if(a3(a)||rh(t)){if(a3(a)&&!rh(t))n=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Q.ETransactionType.DECLARE,contract_class:{sierra_program:aW(a.sierra_program),contract_class_version:a.contract_class_version,entry_points_by_type:a.entry_points_by_type,abi:a.abi},compiled_class_hash:s||"",version:Q.ETransactionVersion.V2,max_fee:th(t.maxFee||0),signature:az(r),sender_address:i,nonce:th(t.nonce)}});else if(a3(a)&&rh(t))n=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Q.ETransactionType.DECLARE,sender_address:i,compiled_class_hash:s||"",version:Q.ETransactionVersion.V3,signature:az(r),nonce:th(t.nonce),contract_class:{sierra_program:aW(a.sierra_program),contract_class_version:a.contract_class_version,entry_points_by_type:a.entry_points_by_type,abi:a.abi},resource_bounds:t.resourceBounds,tip:th(t.tip),paymaster_data:t.paymasterData.map(e=>th(e)),account_deployment_data:t.accountDeploymentData.map(e=>th(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}});else throw Error("declare unspotted parameters")}else n=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Q.ETransactionType.DECLARE,contract_class:{program:a.program,entry_points_by_type:a.entry_points_by_type,abi:a.abi},version:Q.ETransactionVersion.V1,max_fee:th(t.maxFee||0),signature:az(r),sender_address:i,nonce:th(t.nonce)}});return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async deployAccount(e,t){let n,{classHash:a,constructorCalldata:r,addressSalt:i,signature:s}=e;return n=rh(t)?this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:Q.ETransactionType.DEPLOY_ACCOUNT,version:Q.ETransactionVersion.V3,signature:az(s),nonce:th(t.nonce),contract_address_salt:th(i||0),constructor_calldata:n1.toHex(r||[]),class_hash:th(a),resource_bounds:t.resourceBounds,tip:th(t.tip),paymaster_data:t.paymasterData.map(e=>th(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:n1.toHex(r||[]),class_hash:th(a),contract_address_salt:th(i||0),type:Q.ETransactionType.DEPLOY_ACCOUNT,max_fee:th(t.maxFee||0),version:Q.ETransactionVersion.V1,signature:az(s),nonce:th(t.nonce)}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}callContract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=new ru(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:tO(e.entrypoint),calldata:n1.toHex(e.calldata)},block_id:n})}estimateMessageFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,{from_address:n,to_address:a,entry_point_selector:r,payload:i}=e,s={from_address:rt(n),to_address:th(a),entry_point_selector:tB(r),payload:tA(i)},o=new ru(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let n;let a=rC(t);if(n=rh(e)?{signature:az(e.signature),nonce:th(e.nonce),resource_bounds:e.resourceBounds,tip:th(e.tip),paymaster_data:e.paymasterData.map(e=>th(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>th(e))}:{signature:az(e.signature),nonce:th(e.nonce),max_fee:th(e.maxFee||0)},"INVOKE_FUNCTION"===e.type)return{type:Q.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:n1.toHex(e.calldata),version:th(e.version||a.v3),...n};if("DECLARE"===e.type)return a3(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:aW(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:th(e.version||a.v3),...n}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:th(e.version||a.v1),...n};if("DEPLOY_ACCOUNT"===e.type){let{account_deployment_data:t,...r}=n;return{type:e.type,constructor_calldata:n1.toHex(e.constructorCalldata||[]),class_hash:th(e.classHash),contract_address_salt:th(e.addressSalt||0),version:th(e.version||a.v3),...r}}throw Error("RPC buildTransaction received unknown TransactionType")}constructor(e){let{nodeUrl:t,retries:n,headers:a,blockIdentifier:r,chainId:i,specVersion:s,waitMode:o}=e||{};Object.values(ej).includes(t)?this.nodeUrl=rl(t,null==e?void 0:e.default):t?this.nodeUrl=t:this.nodeUrl=rl(void 0,null==e?void 0:e.default),this.retries=n||rk.retries,this.headers={...rk.headers,...a},this.blockIdentifier=r||rk.blockIdentifier,this.chainId=i,this.specVersion=s,this.waitMode=o||!1,this.requestId=0}},rS={};W(rS,{RpcChannel:()=>rx});var rD={headers:{"Content-Type":"application/json"},blockIdentifier:"pending",retries:200},rx=class{get transactionRetryIntervalDefault(){var e;return null!==(e=this.transactionRetryIntervalFallback)&&void 0!==e?e:5e3}setChainId(e){this.chainId=e}fetch(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return rr(this.nodeUrl,{method:"POST",body:aw(a),headers:this.headers})}errorHandler(e,t,n,a){if(n){let{code:a,message:r,data:i}=n;throw new e1("RPC: ".concat(e," with params ").concat(aw(t,null,2),"\n \n        ").concat(a,": ").concat(r,": ").concat(aw(i)))}if(a instanceof e1)throw a;if(a)throw Error(a.message)}async fetchEndpoint(e,t){try{let n=await this.fetch(e,t,this.requestId+=1),{error:a,result:r}=await n.json();return this.errorHandler(e,t,a),r}catch(a){var n;throw this.errorHandler(e,t,null==a?void 0:null===(n=a.response)||void 0===n?void 0:n.data,a),a}}async getChainId(){var e;return null!==(e=this.chainId)&&void 0!==e||(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}async getSpecVersion(){var e;return null!==(e=this.specVersion)&&void 0!==e||(this.specVersion=await this.fetchEndpoint("starknet_specVersion")),this.specVersion}getNonceForAddress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=th(e),a=new ru(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:a})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new ru(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new ru(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new ru(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new ru(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new ru(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new ru(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=th(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let n=new ru(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){let t=th(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=th(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=th(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{blockIdentifier:n=this.blockIdentifier,skipValidate:a=!0,skipFeeCharge:r=!0}=t,i=new ru(n).identifier,s=[];return a&&s.push(ep.ESimulationFlag.SKIP_VALIDATE),r&&s.push(ep.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s})}async waitForTransaction(e,t){var n,a,r;let i;let s=th(e),{retries:o}=this,c=!1,l=!1,d=null!==(n=null==t?void 0:t.retryInterval)&&void 0!==n?n:this.transactionRetryIntervalDefault,u=null!==(a=null==t?void 0:t.errorStates)&&void 0!==a?a:[ep.ETransactionStatus.REJECTED],h=null!==(r=null==t?void 0:t.successStates)&&void 0!==r?r:[ep.ETransactionExecutionStatus.SUCCEEDED,ep.ETransactionStatus.ACCEPTED_ON_L2,ep.ETransactionStatus.ACCEPTED_ON_L1];for(;!c;){await rs(d);try{let e=(i=await this.getTransactionStatus(s)).execution_status,t=i.finality_status;if(!t)throw Error("waiting for transaction status");if(u.includes(e)||u.includes(t)){let n="".concat(e,": ").concat(t),a=Error(n);throw a.response=i,l=!0,a}(h.includes(e)||h.includes(t))&&(c=!0)}catch(e){if(e instanceof Error&&l)throw e;if(o<=0)throw Error("waitForTransaction timed-out with retries ".concat(this.retries))}o-=1}let p=null;for(;null===p;){try{p=await this.getTransactionReceipt(s)}catch(e){if(o<=0)throw Error("waitForTransaction timed-out with retries ".concat(this.retries))}o-=1,await rs(d)}return p}getStorageAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.blockIdentifier,a=th(e),r=tf(t),i=new ru(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:a,key:r,block_id:i})}getClassHashAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=th(e),a=new ru(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:a,contract_address:n})}getClass(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=th(e),a=new ru(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:a})}getClassAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=th(e),a=new ru(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:a,contract_address:n})}async getEstimateFee(e,t){let{blockIdentifier:n=this.blockIdentifier,skipValidate:a=!0}=t,r=new ru(n).identifier,i={};return rp("0.5",await this.getSpecVersion())||(i={simulation_flags:a?[ep.ESimulationFlag.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:r,...i})}async invoke(e,t){let n;return n=rh(t)?this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:ep.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:n1.toHex(e.calldata),version:ep.ETransactionVersion.V3,signature:az(e.signature),nonce:th(t.nonce),resource_bounds:t.resourceBounds,tip:th(t.tip),paymaster_data:t.paymasterData.map(e=>th(e)),account_deployment_data:t.accountDeploymentData.map(e=>th(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:n1.toHex(e.calldata),type:ep.ETransactionType.INVOKE,max_fee:th(t.maxFee||0),version:ep.ETransactionVersion.V1,signature:az(e.signature),nonce:th(t.nonce)}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare(e,t){let n,{contract:a,signature:r,senderAddress:i,compiledClassHash:s}=e;if(a3(a)||rh(t)){if(a3(a)&&!rh(t))n=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:ep.ETransactionType.DECLARE,contract_class:{sierra_program:aW(a.sierra_program),contract_class_version:a.contract_class_version,entry_points_by_type:a.entry_points_by_type,abi:a.abi},compiled_class_hash:s||"",version:ep.ETransactionVersion.V2,max_fee:th(t.maxFee||0),signature:az(r),sender_address:i,nonce:th(t.nonce)}});else if(a3(a)&&rh(t))n=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:ep.ETransactionType.DECLARE,sender_address:i,compiled_class_hash:s||"",version:ep.ETransactionVersion.V3,signature:az(r),nonce:th(t.nonce),contract_class:{sierra_program:aW(a.sierra_program),contract_class_version:a.contract_class_version,entry_points_by_type:a.entry_points_by_type,abi:a.abi},resource_bounds:t.resourceBounds,tip:th(t.tip),paymaster_data:t.paymasterData.map(e=>th(e)),account_deployment_data:t.accountDeploymentData.map(e=>th(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}});else throw Error("declare unspotted parameters")}else n=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:ep.ETransactionType.DECLARE,contract_class:{program:a.program,entry_points_by_type:a.entry_points_by_type,abi:a.abi},version:ep.ETransactionVersion.V1,max_fee:th(t.maxFee||0),signature:az(r),sender_address:i,nonce:th(t.nonce)}});return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async deployAccount(e,t){let n,{classHash:a,constructorCalldata:r,addressSalt:i,signature:s}=e;return n=rh(t)?this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:ep.ETransactionType.DEPLOY_ACCOUNT,version:ep.ETransactionVersion.V3,signature:az(s),nonce:th(t.nonce),contract_address_salt:th(i||0),constructor_calldata:n1.toHex(r||[]),class_hash:th(a),resource_bounds:t.resourceBounds,tip:th(t.tip),paymaster_data:t.paymasterData.map(e=>th(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:n1.toHex(r||[]),class_hash:th(a),contract_address_salt:th(i||0),type:ep.ETransactionType.DEPLOY_ACCOUNT,max_fee:th(t.maxFee||0),version:ep.ETransactionVersion.V1,signature:az(s),nonce:th(t.nonce)}}),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}callContract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=new ru(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:tO(e.entrypoint),calldata:n1.toHex(e.calldata)},block_id:n})}estimateMessageFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,{from_address:n,to_address:a,entry_point_selector:r,payload:i}=e,s={from_address:rt(n),to_address:th(a),entry_point_selector:tB(r),payload:tA(i)},o=new ru(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let n;let a=rC(t);if(n=rh(e)?{signature:az(e.signature),nonce:th(e.nonce),resource_bounds:e.resourceBounds,tip:th(e.tip),paymaster_data:e.paymasterData.map(e=>th(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>th(e))}:{signature:az(e.signature),nonce:th(e.nonce),max_fee:th(e.maxFee||0)},"INVOKE_FUNCTION"===e.type)return{type:ep.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:n1.toHex(e.calldata),version:th(e.version||a.v3),...n};if("DECLARE"===e.type)return a3(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:aW(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:th(e.version||a.v3),...n}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:th(e.version||a.v1),...n};if("DEPLOY_ACCOUNT"===e.type){let{account_deployment_data:t,...r}=n;return{type:e.type,constructor_calldata:n1.toHex(e.constructorCalldata||[]),class_hash:th(e.classHash),contract_address_salt:th(e.addressSalt||0),version:th(e.version||a.v3),...r}}throw Error("RPC buildTransaction received unknown TransactionType")}constructor(e){let{nodeUrl:t,retries:n,headers:a,blockIdentifier:r,chainId:i,specVersion:s,waitMode:o,transactionRetryIntervalFallback:c}=e||{};Object.values(ej).includes(t)?this.nodeUrl=rl(t,null==e?void 0:e.default):t?this.nodeUrl=t:this.nodeUrl=rl(void 0,null==e?void 0:e.default),this.retries=n||rD.retries,this.headers={...rD.headers,...a},this.blockIdentifier=r||rD.blockIdentifier,this.chainId=i,this.specVersion=s,this.waitMode=o||!1,this.requestId=0,this.transactionRetryIntervalFallback=c}},rV=class{estimatedFeeToMaxFee(e){var t;return aZ(e,null===(t=this.margin)||void 0===t?void 0:t.maxFee)}estimateFeeToBounds(e){var t,n;return aQ(e,null===(t=this.margin)||void 0===t?void 0:t.l1BoundMaxAmount,null===(n=this.margin)||void 0===n?void 0:n.l1BoundMaxPricePerUnit)}parseGetBlockResponse(e){return{status:"PENDING",...e}}parseTransactionReceipt(e){return"actual_fee"in e&&tL(e.actual_fee)?{...e,actual_fee:{amount:e.actual_fee,unit:"FRI"}}:e}parseFeeEstimateResponse(e){let t=e[0];return{overall_fee:td(t.overall_fee),gas_consumed:td(t.gas_consumed),gas_price:td(t.gas_price),unit:t.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(t.overall_fee),resourceBounds:this.estimateFeeToBounds(t),data_gas_consumed:t.data_gas_consumed?td(t.data_gas_consumed):0n,data_gas_price:t.data_gas_price?td(t.data_gas_price):0n}}parseFeeEstimateBulkResponse(e){return e.map(e=>({overall_fee:td(e.overall_fee),gas_consumed:td(e.gas_consumed),gas_price:td(e.gas_price),unit:e.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(e.overall_fee),resourceBounds:this.estimateFeeToBounds(e),data_gas_consumed:e.data_gas_consumed?td(e.data_gas_consumed):0n,data_gas_price:e.data_gas_price?td(e.data_gas_price):0n}))}parseSimulateTransactionResponse(e){return e.map(e=>({...e,suggestedMaxFee:this.estimatedFeeToMaxFee(e.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(e.fee_estimation)}))}parseContractClassResponse(e){return{...e,abi:tL(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}constructor(e){this.margin=e}},rN=class e{match(e){return this.statusReceipt in e?e[this.statusReceipt](this.value):e._()}isSuccess(){return"success"===this.statusReceipt}isReverted(){return"reverted"===this.statusReceipt}isRejected(){return"rejected"===this.statusReceipt}isError(){return"error"===this.statusReceipt}static isSuccess(e){return"SUCCEEDED"===e.execution_status}static isReverted(e){return"REVERTED"===e.execution_status}static isRejected(e){return"REJECTED"===e.status}constructor(t){for(let[n]of([this.statusReceipt,this.value]=e.isSuccess(t)?["success",t]:e.isReverted(t)?["reverted",t]:e.isRejected(t)?["rejected",t]:["error",Error("Unknown response type")],Object.entries(this)))Object.defineProperty(this,n,{enumerable:!1});for(let[e,n]of Object.entries(t))Object.defineProperty(this,e,{enumerable:!0,writable:!1,value:n})}},rO=class{fetch(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.channel.fetch(e,t,n)}async getChainId(){return this.channel.getChainId()}async getSpecVersion(){return this.channel.getSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pending",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;if("latest"===e)return;let n=await this.getBlockNumber(),a="pending"===e?n+1:Number(th(e));if(a<=n)return;let{retries:r}=this.channel,i=r,s=!1;for(;!s;)if(await this.getBlockNumber()===a?s=!0:await rs(t),(i-=1)<=0)throw Error("waitForBlock() timed-out after ".concat(r," tries."))}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(e){let t=await this.channel.getTransactionByHash(e);ts("L1_HANDLER"===t.type,"This L2 transaction is not a L1 message.");let{calldata:n,contract_address:a,entry_point_selector:r,nonce:i}=t,s=ew([n[0],a,i,r,n.length-1,...n.slice(1)].reduce((e,t)=>e+eA(th(t)).padStart(64,"0"),""));return ew((0,eJ.bytesToHex)((0,e$.keccak_256)(tC(s))))}async getBlockWithReceipts(e){if(this.channel instanceof ez.RpcChannel)throw new e1("Unsupported method for RPC version");return this.channel.getBlockWithReceipts(e)}async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getPendingTransactions(){let{transactions:e}=await this.getBlockWithTxHashes("pending").then(this.responseParser.parseGetBlockResponse);return Promise.all(e.map(e=>this.getTransactionByHash(e)))}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){let t=await this.channel.getTransactionReceipt(e);return new rN(this.responseParser.parseTransactionReceipt(t))}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then(e=>this.responseParser.parseSimulateTransactionResponse(e))}async waitForTransaction(e,t){return new rN(await this.channel.waitForTransaction(e,t))}async getStorageAt(e,t,n){return this.channel.getStorageAt(e,t,n)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t){let n,{blockIdentifier:a=this.channel.blockIdentifier,compiler:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e)n=await this.getClassAt(e,a);else if(t)n=await this.getClass(t,a);else throw Error("getContractVersion require contractAddress or classHash");return a3(n)?r?{cairo:"1",compiler:nb(n.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getEstimateFee(e,t,n,a){return this.getInvokeEstimateFee(e,t,n,a)}async getInvokeEstimateFee(e,t,n,a){return this.channel.getEstimateFee([{type:"INVOKE_FUNCTION",...e,...t}],{blockIdentifier:n,skipValidate:a}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeclareEstimateFee(e,t,n,a){return this.channel.getEstimateFee([{type:"DECLARE",...e,...t}],{blockIdentifier:n,skipValidate:a}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeployAccountEstimateFee(e,t,n,a){return this.channel.getEstimateFee([{type:"DEPLOY_ACCOUNT",...e,...t}],{blockIdentifier:n,skipValidate:a}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then(e=>this.responseParser.parseFeeEstimateBulkResponse(e))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){return this.channel.getEvents(e)}constructor(e){this.getStateUpdate=this.getBlockStateUpdate,e&&"channel"in e?(this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new rV):(this.channel=new rx({...e,waitMode:!1}),this.responseParser=new rV(null==e?void 0:e.feeMarginPercentage))}},rB=n(36876),rR={};W(rR,{StarknetIdContract:()=>rY,StarknetIdIdentityContract:()=>rG,StarknetIdMulticallContract:()=>rJ,StarknetIdPfpContract:()=>rQ,StarknetIdPopContract:()=>r1,StarknetIdVerifierContract:()=>rz,dynamicCallData:()=>r3,dynamicFelt:()=>r5,execution:()=>r6,getStarknetIdContract:()=>rW,getStarknetIdIdentityContract:()=>rX,getStarknetIdMulticallContract:()=>r$,getStarknetIdPfpContract:()=>r0,getStarknetIdPopContract:()=>r2,getStarknetIdVerifierContract:()=>rZ,useDecoded:()=>rq,useEncoded:()=>rK});var rP="abcdefghijklmnopqrstuvwxyz0123456789-",rF=BigInt(rP.length+1),rM="",rL=BigInt(rP.length),rH=BigInt(rM.length),rU=BigInt(rM.length+1);function rj(e){let t=0;for(;e.endsWith(rM[rM.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function rq(e){let t="";return(e.forEach(e=>{for(;e!==eV;){let n=e%rF;if(e/=rF,n===BigInt(rP.length)){let n=e/rU;if(n===eV){let a=e%rU;e=n,a===eV?t+=rP[0]:t+=rM[Number(a)-1]}else t+=rM[Number(e%rH)],e/=rH}else t+=rP[Number(n)]}let[n,a]=rj(t);a&&(t=n+(a%2==0?rM[rM.length-1].repeat(a/2-1)+rM[0]+rP[1]:rM[rM.length-1].repeat((a-1)/2+1))),t+="."}),t)?t.concat("stark"):t}function rK(e){let t=BigInt(0),n=BigInt(1);if(e.endsWith(rM[0]+rP[1])){let[t,n]=rj(e.substring(0,e.length-2));e=t+rM[rM.length-1].repeat(2*(n+1))}else{let[t,n]=rj(e);n&&(e=t+rM[rM.length-1].repeat(1+2*(n-1)))}for(let a=0;a<e.length;a+=1){let r=e[a],i=rP.indexOf(r),s=BigInt(rP.indexOf(r));-1!==i?a===e.length-1&&e[a]===rP[0]?(t+=n*rL,n*=rF*rF):(t+=n*s,n*=rF):-1!==rM.indexOf(r)&&(t+=n*rL,n*=rF,t+=n*BigInt((a===e.length-1?1:0)+rM.indexOf(r)),n*=rH)}return t}var rY=((O=rY||{}).MAINNET="0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",O.TESTNET_SEPOLIA="0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474",O);function rW(e){switch(e){case"0x534e5f4d41494e":return"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678";case"0x534e5f5345504f4c4941":return"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474";default:throw Error("Starknet.id is not yet deployed on this network")}}var rG=((B=rG||{}).MAINNET="0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",B.TESTNET_SEPOLIA="0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda",B);function rX(e){switch(e){case"0x534e5f4d41494e":return"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af";case"0x534e5f5345504f4c4941":return"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda";default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var rJ="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function r$(e){switch(e){case"0x534e5f4d41494e":case"0x534e5f5345504f4c4941":return rJ;default:throw Error("Starknet.id multicall contract is not yet deployed on this network")}}var rz=((R=rz||{}).MAINNET="0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",R.TESTNET_SEPOLIA="0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566",R);function rZ(e){switch(e){case"0x534e5f4d41494e":return"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf";case"0x534e5f5345504f4c4941":return"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566";default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var rQ=((P=rQ||{}).MAINNET="0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",P.TESTNET_SEPOLIA="0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02",P);function r0(e){switch(e){case"0x534e5f4d41494e":return"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7";case"0x534e5f5345504f4c4941":return"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02";default:throw Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var r1=((F=r1||{}).MAINNET="0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",F.TESTNET_SEPOLIA="0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a",F);function r2(e){switch(e){case"0x534e5f4d41494e":return"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4";case"0x534e5f5345504f4c4941":return"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a";default:throw Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function r6(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new nk({Static:e,IfEqual:t?nw(t[0],t[1],t[2]):void 0,IfNotEqual:n?nw(n[0],n[1],n[2]):void 0})}function r5(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return new nk({Hardcoded:e,Reference:t?nw(t[0],t[1]):void 0})}function r3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new nk({Hardcoded:e,Reference:t?nw(t[0],t[1]):void 0,ArrayReference:n?nw(n[0],n[1]):void 0})}var r4=class e{async getStarkName(t,n){return e.getStarkName(this,t,n)}async getAddressFromStarkName(t,n){return e.getAddressFromStarkName(this,t,n)}async getStarkProfile(t,n,a,r,i,s,o){return e.getStarkProfile(this,t,n,a,r,i,s,o)}static async getStarkName(e,t,n){let a=await e.getChainId(),r=null!=n?n:rW(a);try{let n=(await e.callContract({contractAddress:r,entrypoint:"address_to_domain",calldata:n1.compile({address:t,hint:[]})})).map(e=>BigInt(e)).slice(1),a=rq(n);if(!a)throw Error("Starkname not found");return a}catch(e){if(e instanceof Error&&"Starkname not found"===e.message)throw e;throw Error("Could not get stark name")}}static async getAddressFromStarkName(e,t,n){let a=await e.getChainId(),r=null!=n?n:rW(a);try{let n=t.replace(".stark","").split(".").map(e=>rK(e).toString(10));return(await e.callContract({contractAddress:r,entrypoint:"domain_to_address",calldata:n1.compile({domain:n,hint:[]})}))[0]}catch(e){throw Error("Could not get address from stark name")}}static async getStarkProfile(e,t,n,a,r,i,s,o){let c=await e.getChainId(),l=null!=n?n:rW(c),d=null!=a?a:rX(c),u=null!=r?r:rZ(c),h=null!=i?i:r0(c),p=null!=s?s:r2(c),f=null!=o?o:r$(c);try{let n=[{execution:r6({}),to:r3(l),selector:r3(tO("address_to_domain")),calldata:[r3(t),r3("0")]},{execution:r6({}),to:r5(l),selector:r5(tO("domain_to_id")),calldata:[r3(void 0,void 0,[0,0])]},{execution:r6({}),to:r5(d),selector:r5(tO("get_verifier_data")),calldata:[r3(void 0,[1,0]),r3(tK("twitter")),r3(u),r3("0")]},{execution:r6({}),to:r5(d),selector:r5(tO("get_verifier_data")),calldata:[r3(void 0,[1,0]),r3(tK("github")),r3(u),r3("0")]},{execution:r6({}),to:r5(d),selector:r5(tO("get_verifier_data")),calldata:[r3(void 0,[1,0]),r3(tK("discord")),r3(u),r3("0")]},{execution:r6({}),to:r5(d),selector:r5(tO("get_verifier_data")),calldata:[r3(void 0,[1,0]),r3(tK("proof_of_personhood")),r3(p),r3("0")]},{execution:r6({}),to:r5(d),selector:r5(tO("get_verifier_data")),calldata:[r3(void 0,[1,0]),r3(tK("nft_pp_contract")),r3(h),r3("0")]},{execution:r6({}),to:r5(d),selector:r5(tO("get_extended_verifier_data")),calldata:[r3(void 0,[1,0]),r3(tK("nft_pp_id")),r3("2"),r3(h),r3("0")]},{execution:r6(void 0,void 0,[6,0,0]),to:r5(void 0,[6,0]),selector:r5(tO("tokenURI")),calldata:[r3(void 0,[7,1]),r3(void 0,[7,2])]}],a=await e.callContract({contractAddress:f,entrypoint:"aggregate",calldata:n1.compile({calls:n})});if(Array.isArray(a)){let e=parseInt(a[0],16),t=[],n=1;for(let r=0;r<e;r+=1)if(n<a.length){let e=parseInt(a[n],16);n+=1;let r=a.slice(n,n+e);t.push(r),n+=e}else break;let r=rq(t[0].slice(1).map(e=>BigInt(e))),i="0x0"!==t[2][0]?BigInt(t[2][0]).toString():void 0,s="0x0"!==t[3][0]?BigInt(t[3][0]).toString():void 0,o="0x0"!==t[4][0]?BigInt(t[4][0]).toString():void 0,c="0x1"===t[5][0],l=("0x9"===a[0]?t[8].slice(1).map(e=>tY(e)).join(""):void 0)||"https://starknet.id/api/identicons/".concat(BigInt(t[1][0]).toString());return{name:r,twitter:i,github:s,discord:o,proofOfPersonhood:c,profilePicture:l}}throw Error("Error while calling aggregate function")}catch(e){if(e instanceof Error)throw e;throw Error("Could not get user stark profile data from address")}}},r8=class extends(0,rB.Mixin)(rO,r4){},r7=class{},r9=new rO({default:!0}),ie=class{},it={};W(it,{TypedDataRevision:()=>ti.TypedDataRevision,encodeData:()=>im,encodeType:()=>ip,encodeValue:()=>iy,getDependencies:()=>ih,getMessageHash:()=>iE,getStructHash:()=>iv,getTypeHash:()=>ig,isMerkleTreeType:()=>iu,prepareSelector:()=>id});var ia={};W(ia,{MerkleTree:()=>ir,proofMerklePath:()=>function e(t,n,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ak;if(0===a.length)return t===n;let[i,...s]=a;return e(t,ir.hash(n,i,r),s,r)}});var ir=class e{build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);let n=[];for(let a=0;a<t.length;a+=2)a+1===t.length?n.push(e.hash(t[a],"0x0",this.hashMethod)):n.push(e.hash(t[a],t[a+1],this.hashMethod));return this.build(n)}static hash(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ak,[a,r]=[BigInt(e),BigInt(t)].sort((e,t)=>e>=t?1:-1);return n(a,r)}getProof(t){var n,a;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.leaves,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=r.indexOf(t);if(-1===s)throw Error("leaf not found");if(1===r.length)return i;let o=s%2==0,c=null!==(n=o?r[s+1]:r[s-1])&&void 0!==n?n:"0x0",l=[...i,c],d=this.leaves.length===r.length?-1:this.branches.findIndex(e=>e.length===r.length),u=null!==(a=this.branches[d+1])&&void 0!==a?a:[this.root];return this.getProof(e.hash(o?t:c,o?c:t,this.hashMethod),u,l)}constructor(e,t=ak){this.branches=[],this.hashMethod=t,this.leaves=e,this.root=this.build(e)}},ii={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},is={[ti.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:ax,hashMerkleMethod:aI,escapeTypeString:e=>'"'.concat(e,'"'),presetTypes:ii},[ti.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:aD,hashMerkleMethod:ak,escapeTypeString:e=>e,presetTypes:{}}};function io(e,t,n){let{min:a,max:r}=n,i=BigInt(e);ts(i>=a&&i<=r,"".concat(i," (").concat(t,") is out of bounds [").concat(a,", ").concat(r,"]"))}function ic(e){var t;let{types:n,domain:a}=e;return is[ti.TypedDataRevision.ACTIVE].domain in n&&a.revision===ti.TypedDataRevision.ACTIVE?ti.TypedDataRevision.ACTIVE:is[ti.TypedDataRevision.LEGACY].domain in n&&(null!==(t=a.revision)&&void 0!==t?t:ti.TypedDataRevision.LEGACY)===ti.TypedDataRevision.LEGACY?ti.TypedDataRevision.LEGACY:void 0}function il(e){try{return th(e)}catch(t){if(tL(e))return th(tK(e));throw Error("Invalid BigNumberish: ".concat(e))}}function id(e){return tl(e)?e:tO(e)}function iu(e){return"merkletree"===e.type}function ih(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ti.TypedDataRevision.LEGACY;return("*"===t[t.length-1]?t=t.slice(0,-1):r===ti.TypedDataRevision.ACTIVE&&("enum"===t?t=a:t.match(/^\(.*\)$/)&&(t=t.slice(1,-1))),n.includes(t)||!e[t])?n:[t,...e[t].reduce((t,n)=>[...t,...ih(e,n.type,t,n.contains,r).filter(e=>!t.includes(e))],[])]}function ip(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ti.TypedDataRevision.LEGACY,a=n===ti.TypedDataRevision.ACTIVE?{...e,...is[n].presetTypes}:e,[r,...i]=ih(a,t,void 0,void 0,n),s=r?[r,...i.sort()]:[],o=is[n].escapeTypeString;return s.map(e=>{let t=a[e].map(e=>{let t="enum"===e.type&&n===ti.TypedDataRevision.ACTIVE?e.contains:e.type,a=t.match(/^\(.*\)$/)?"(".concat(t.slice(1,-1).split(",").map(e=>e?o(e):e).join(","),")"):o(t);return"".concat(o(e.name),":").concat(a)});return"".concat(o(e),"(").concat(t,")")}).join("")}function ig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ti.TypedDataRevision.LEGACY;return tO(ip(e,t,n))}function iy(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ti.TypedDataRevision.LEGACY;if(e[t])return[t,iv(e,t,n,r)];if(is[r].presetTypes[t])return[t,iv(is[r].presetTypes,t,n,r)];if(t.endsWith("*")){let a=n.map(n=>iy(e,t.slice(0,-1),n,void 0,r)[1]);return[t,is[r].hashMethod(a)]}switch(t){case"enum":if(r===ti.TypedDataRevision.ACTIVE){let[i,s]=Object.entries(n)[0],o=e[a.parent][0],c=e[o.contains],l=c.find(e=>e.name===i),d=c.indexOf(l),u=l.type.slice(1,-1).split(",").map((t,n)=>t?iy(e,t,s[n],void 0,r)[1]:t);return[t,is[r].hashMethod([d,...u])]}return[t,il(n)];case"merkletree":{let t=function(e,t){if(t.parent&&t.key){let n=e[t.parent].find(e=>e.name===t.key);if(!iu(n))throw Error("".concat(t.key," is not a merkle tree"));if(n.contains.endsWith("*"))throw Error("Merkle tree contain property must not be an array but was given ".concat(t.key));return n.contains}return"raw"}(e,a),{root:i}=new ir(n.map(n=>iy(e,t,n,void 0,r)[1]),is[r].hashMerkleMethod);return["felt",i]}case"selector":return["felt",id(n)];case"string":if(r===ti.TypedDataRevision.ACTIVE){let e=tX(n),a=[e.data.length,...e.data,e.pending_word,e.pending_word_len];return[t,is[r].hashMethod(a)]}return[t,il(n)];case"i128":if(r===ti.TypedDataRevision.ACTIVE){let e=BigInt(n);return io(e,t,eL),[t,il(e<0n?eB+e:e)]}return[t,il(n)];case"timestamp":case"u128":return r===ti.TypedDataRevision.ACTIVE&&io(n,t,eH),[t,il(n)];case"felt":case"shortstring":return r===ti.TypedDataRevision.ACTIVE&&io(il(n),t,eM),[t,il(n)];case"ClassHash":case"ContractAddress":return r===ti.TypedDataRevision.ACTIVE&&io(n,t,eM),[t,il(n)];case"bool":return r===ti.TypedDataRevision.ACTIVE&&ts("boolean"==typeof n,"Type mismatch for ".concat(t," ").concat(n)),[t,il(n)];default:if(r===ti.TypedDataRevision.ACTIVE)throw Error("Unsupported type: ".concat(t));return[t,il(n)]}}function im(e,t,n){var a;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ti.TypedDataRevision.LEGACY,[i,s]=(null!==(a=e[t])&&void 0!==a?a:is[r].presetTypes[t]).reduce((a,i)=>{let[s,o]=a;if(void 0===n[i.name]||null===n[i.name]&&"enum"!==i.type)throw Error("Cannot encode data: missing data for '".concat(i.name,"'"));let c=n[i.name],l={parent:t,key:i.name},[d,u]=iy(e,i.type,c,l,r);return[[...s,d],[...o,u]]},[["felt"],[ig(e,t,r)]]);return[i,s]}function iv(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ti.TypedDataRevision.LEGACY;return is[a].hashMethod(im(e,t,n,a)[1])}function iE(e,t){if(!(e.message&&e.primaryType&&e.types&&ic(e)))throw Error("Typed data does not match JSON schema");let n=ic(e),{domain:a,hashMethod:r}=is[n];return r([tK("StarkNet Message"),iv(e.types,a,e.domain,n),t,iv(e.types,e.primaryType,e.message,n)])}var i_=class{async getPubKey(){return n4.getStarkKey(this.pk)}async signMessage(e,t){let n=iE(e,t);return this.signRaw(n)}async signTransaction(e,t){let n;let a=rA(e,t.cairoVersion);if(Object.values(z.ETransactionVersion2).includes(t.version))n=ag({...t,senderAddress:t.walletAddress,compiledCalldata:a,version:t.version});else if(Object.values(z.ETransactionVersion3).includes(t.version))n=ag({...t,senderAddress:t.walletAddress,compiledCalldata:a,version:t.version,nonceDataAvailabilityMode:a0(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:a0(t.feeDataAvailabilityMode)});else throw Error("unsupported signTransaction version");return this.signRaw(n)}async signDeployAccountTransaction(e){let t;let n=n1.compile(e.constructorCalldata);if(Object.values(z.ETransactionVersion2).includes(e.version))t=am({...e,salt:e.addressSalt,constructorCalldata:n,version:e.version});else if(Object.values(z.ETransactionVersion3).includes(e.version))t=am({...e,salt:e.addressSalt,compiledConstructorCalldata:n,version:e.version,nonceDataAvailabilityMode:a0(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:a0(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(t)}async signDeclareTransaction(e){let t;if(Object.values(z.ETransactionVersion2).includes(e.version))t=ay({...e,version:e.version});else if(Object.values(z.ETransactionVersion3).includes(e.version))t=ay({...e,version:e.version,nonceDataAvailabilityMode:a0(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:a0(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeclareTransaction version");return this.signRaw(t)}async signRaw(e){return n4.sign(e,this.pk)}constructor(e=n4.utils.randomPrivateKey()){this.pk=e instanceof Uint8Array?eT(e):th(e)}},ib=n(44390),iT={};function iA(e){return new t5(e).toBigInt()}function iw(e){return t5.is(e)}function iC(e){return new t5(e).toUint256HexString()}W(iT,{UINT_128_MAX:()=>tz,UINT_256_MAX:()=>tZ,bnToUint256:()=>iC,isUint256:()=>iw,uint256ToBN:()=>iA});var ik=class{async getPubKey(){return ew(eT(ib.secp256k1.getPublicKey(this.pk,!1)).padStart(130,"0").slice(2))}async signMessage(e,t){let n=iE(e,t),a=ib.secp256k1.sign(eA(eS(n)),this.pk);return this.formatEthSignature(a)}async signTransaction(e,t){let n;let a=rA(e,t.cairoVersion);if(Object.values(z.ETransactionVersion2).includes(t.version))n=ag({...t,senderAddress:t.walletAddress,compiledCalldata:a,version:t.version});else if(Object.values(z.ETransactionVersion3).includes(t.version))n=ag({...t,senderAddress:t.walletAddress,compiledCalldata:a,version:t.version,nonceDataAvailabilityMode:a0(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:a0(t.feeDataAvailabilityMode)});else throw Error("unsupported signTransaction version");let r=ib.secp256k1.sign(eA(eS(n)),this.pk);return this.formatEthSignature(r)}async signDeployAccountTransaction(e){let t;let n=n1.compile(e.constructorCalldata);if(Object.values(z.ETransactionVersion2).includes(e.version))t=am({...e,salt:e.addressSalt,constructorCalldata:n,version:e.version});else if(Object.values(z.ETransactionVersion3).includes(e.version))t=am({...e,salt:e.addressSalt,compiledConstructorCalldata:n,version:e.version,nonceDataAvailabilityMode:a0(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:a0(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeployAccountTransaction version");let a=ib.secp256k1.sign(eA(eS(t)),this.pk);return this.formatEthSignature(a)}async signDeclareTransaction(e){let t;if(Object.values(z.ETransactionVersion2).includes(e.version))t=ay({...e,version:e.version});else if(Object.values(z.ETransactionVersion3).includes(e.version))t=ay({...e,version:e.version,nonceDataAvailabilityMode:a0(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:a0(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeclareTransaction version");let n=ib.secp256k1.sign(eA(eS(t)),this.pk);return this.formatEthSignature(n)}formatEthSignature(e){let t=iC(e.r),n=iC(e.s);return[th(t.low),th(t.high),th(n.low),th(n.high),th(e.recovery)]}constructor(e=re()){this.pk=e instanceof Uint8Array?eT(e).padStart(64,"0"):eA(th(e)).padStart(64,"0")}},iI={};function iS(e){return"event"===e.type}function iD(e){return nE(e)?function(e){let t=e.filter(e=>iS(e)&&"struct"===e.kind),n=e.filter(e=>iS(e)&&"enum"===e.kind);return t.reduce((e,t)=>{let a=[],{name:r}=t,i=!1,s=e=>e.type===r;for(;;){let e=n.find(e=>e.variants.some(s));if(void 0===e)break;let t=e.variants.find(s);a.unshift(t.name),"flat"===t.kind&&(i=!0),r=e.name}if(0===a.length)throw Error("inconsistency in ABI events definition.");i&&(a=[a[a.length-1]]);let o=a.pop(),c={[ew(n4.keccak(ev(o)).toString(16))]:t};for(;a.length>0;)c={[ew(n4.keccak(ev(a.pop())).toString(16))]:c};return function e(t,n){let a={...t};return ix(t)&&ix(n)&&Object.keys(n).forEach(r=>{ix(n[r])&&r in t?a[r]=e(t[r],n[r]):Object.assign(a,{[r]:n[r]})}),a}(e,c={...c})},{})}(e):e.filter(e=>"event"===e.type).reduce((e,t)=>{let n=t.name,a={...t};return a.name=n,{...e,[ew(n4.keccak(ev(n)).toString(16))]:a}},{})}function ix(e){return e&&"object"==typeof e&&!Array.isArray(e)}function iV(e,t,n,a){return e.flat().reduce((e,r)=>{var i,s,o;let c=t[null!==(o=r.keys.shift())&&void 0!==o?o:0];if(!c)return e;for(;!c.name;){let e=r.keys.shift();ts(!!e,'Not enough data in "key" property of this event.'),c=c[e]}let l={};l[c.name]={};let d=r.keys[Symbol.iterator](),u=r.data[Symbol.iterator](),h=(null===(i=c.members)||void 0===i?void 0:i.filter(e=>"key"===e.kind))||c.keys,p=(null===(s=c.members)||void 0===s?void 0:s.filter(e=>"data"===e.kind))||c.data;return h.forEach(e=>{l[c.name][e.name]=nq(d,e,n,a,l[c.name])}),p.forEach(e=>{l[c.name][e.name]=nq(u,e,n,a,l[c.name])}),e.push(l),e},[])}function iN(e){if(!e.events)throw Error("UDC emitted event is empty");let t=e.events.find(e=>ty(e.from_address)===ty(eW.ADDRESS))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:t.data[0],address:t.data[0],deployer:t.data[1],unique:t.data[2],classHash:t.data[3],calldata_len:t.data[4],calldata:t.data.slice(5,5+parseInt(t.data[4],16)),salt:t.data[t.data.length-1]}}W(iI,{getAbiEvents:()=>iD,isAbiEvent:()=>iS,isObject:()=>ix,parseEvents:()=>iV,parseUDCEvent:()=>iN});var iO=class extends r8{getPreferredVersion(e,t){return this.transactionVersion===z.ETransactionVersion.V3?t:this.transactionVersion===z.ETransactionVersion.V2?e:z.ETransactionVersion.V3}async getNonce(e){return super.getNonceForAddress(this.address,e)}async getNonceSafe(e){try{return td(null!=e?e:await this.getNonce())}catch(e){return 0n}}async getCairoVersion(e){if(!this.cairoVersion){let{cairo:t}=e?await super.getContractVersion(void 0,e):await super.getContractVersion(this.address);this.cairoVersion=t}return this.cairoVersion}async estimateFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.estimateInvokeFee(e,t)}async estimateInvokeFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{nonce:n,blockIdentifier:a,version:r,skipValidate:i=!0}=t,s=Array.isArray(e)?e:[e],o=td(null!=n?n:await this.getNonce()),c=a1(this.getPreferredVersion(z.ETransactionVersion.F1,z.ETransactionVersion.F3),a2(r)),l=await this.getChainId(),d={...a6(t),walletAddress:this.address,nonce:o,maxFee:eV,version:c,chainId:l,cairoVersion:await this.getCairoVersion(),skipValidate:i},u=await this.buildInvocation(s,d);return super.getInvokeEstimateFee({...u},{...a6(t),version:c,nonce:o},a,t.skipValidate)}async estimateDeclareFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{blockIdentifier:n,nonce:a,version:r,skipValidate:i=!0}=t,s=td(null!=a?a:await this.getNonce()),o=a1(a3(e.contract)?this.getPreferredVersion(z.ETransactionVersion.F2,z.ETransactionVersion.F3):z.ETransactionVersion.F1,a2(r)),c=await this.getChainId(),l=await this.buildDeclarePayload(e,{...a6(t),nonce:s,chainId:c,version:o,walletAddress:this.address,maxFee:eV,cairoVersion:void 0,skipValidate:i});return super.getDeclareEstimateFee(l,{...a6(t),version:o,nonce:s},n,t.skipValidate)}async estimateAccountDeployFee(e){let{classHash:t,addressSalt:n=0,constructorCalldata:a=[],contractAddress:r}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{blockIdentifier:s,version:o,skipValidate:c=!0}=i,l=a1(this.getPreferredVersion(z.ETransactionVersion.F1,z.ETransactionVersion.F3),a2(o)),d=await this.getChainId(),u=await this.buildAccountDeployPayload({classHash:t,addressSalt:n,constructorCalldata:a,contractAddress:r},{...a6(i),nonce:eV,chainId:d,version:l,walletAddress:this.address,maxFee:eV,cairoVersion:void 0,skipValidate:c});return super.getDeployAccountEstimateFee({...u},{...a6(i),version:l,nonce:eV},s,i.skipValidate)}async estimateDeployFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.buildUDCContractPayload(e);return this.estimateInvokeFee(n,t)}async estimateFeeBulk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{nonce:n,blockIdentifier:a,version:r,skipValidate:i}=t,s=await this.accountInvocationsFactory(e,{...a6(t),versions:[z.ETransactionVersion.F1,a1(this.getPreferredVersion(z.ETransactionVersion.F2,z.ETransactionVersion.F3),r)],nonce:n,blockIdentifier:a,skipValidate:i});return super.getEstimateFeeBulk(s,{blockIdentifier:a,skipValidate:i})}async simulateTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{nonce:n,blockIdentifier:a,skipValidate:r=!0,skipExecute:i,version:s}=t,o=await this.accountInvocationsFactory(e,{...a6(t),versions:[z.ETransactionVersion.V1,a1(this.getPreferredVersion(z.ETransactionVersion.V2,z.ETransactionVersion.V3),s)],nonce:n,blockIdentifier:a,skipValidate:r});return super.getSimulateTransaction(o,{blockIdentifier:a,skipValidate:r,skipExecute:i})}async execute(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0===t||Array.isArray(t)?a:t,i=Array.isArray(e)?e:[e],s=td(null!==(n=r.nonce)&&void 0!==n?n:await this.getNonce()),o=a1(this.getPreferredVersion(z.ETransactionVersion.V1,z.ETransactionVersion.V3),r.version),c=await this.getUniversalSuggestedFee(o,{type:"INVOKE_FUNCTION",payload:e},{...r,version:o}),l=await this.getChainId(),d={...a6(r),resourceBounds:c.resourceBounds,walletAddress:this.address,nonce:s,maxFee:c.maxFee,version:o,chainId:l,cairoVersion:await this.getCairoVersion()},u=await this.signer.signTransaction(i,d),h=rA(i,await this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:h,signature:u},{...a6(r),resourceBounds:c.resourceBounds,nonce:s,maxFee:c.maxFee,version:o})}async declareIfNot(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a4(e);try{await this.getClassByHash(n.classHash)}catch(n){return this.declare(e,t)}return{transaction_hash:"",class_hash:n.classHash}}async declare(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a4(e),{nonce:a,version:r}=t,i=a1(a3(e.contract)?this.getPreferredVersion(z.ETransactionVersion.V2,z.ETransactionVersion.V3):z.ETransactionVersion.V1,r),s=await this.getUniversalSuggestedFee(i,{type:"DECLARE",payload:n},{...t,version:i}),o={...a6(t),resourceBounds:s.resourceBounds,maxFee:s.maxFee,nonce:td(null!=a?a:await this.getNonce()),version:i,chainId:await this.getChainId(),walletAddress:this.address,cairoVersion:void 0},c=await this.buildDeclarePayload(n,o);return this.declareContract(c,o)}async deploy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{calls:n,addresses:a}=rw(e,this.address);return{...await this.execute(n,void 0,t),contract_address:a}}async deployContract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=await this.deploy(e,t);return iN(await this.waitForTransaction(n.transaction_hash))}async declareAndDeploy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{constructorCalldata:n,salt:a,unique:r}=e,i=await this.declareIfNot(e,t);if(""!==i.transaction_hash){let e=await this.waitForTransaction(i.transaction_hash);i={...i,...e}}let s=await this.deployContract({classHash:i.class_hash,salt:a,unique:r,constructorCalldata:n},t);return{declare:{...i},deploy:s}}async deployAccount(e){let{classHash:t,constructorCalldata:n=[],addressSalt:a=0,contractAddress:r}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a1(this.getPreferredVersion(z.ETransactionVersion.V1,z.ETransactionVersion.V3),i.version),o=await this.getChainId(),c=n1.compile(n),l=null!=r?r:aV(a,t,c,0),d=await this.getUniversalSuggestedFee(s,{type:"DEPLOY_ACCOUNT",payload:{classHash:t,constructorCalldata:c,addressSalt:a,contractAddress:l}},i),u=await this.signer.signDeployAccountTransaction({...a6(i),classHash:t,constructorCalldata:c,contractAddress:l,addressSalt:a,chainId:o,resourceBounds:d.resourceBounds,maxFee:d.maxFee,version:s,nonce:eV});return this.deployAccountContract({classHash:t,addressSalt:a,constructorCalldata:n,signature:u},{...a6(i),nonce:eV,resourceBounds:d.resourceBounds,maxFee:d.maxFee,version:s})}async signMessage(e){return this.signer.signMessage(e,this.address)}async hashMessage(e){return iE(e,this.address)}async verifyMessageHash(e,t,n,a){let r;let i=a||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","is invalid, with respect to the public key","INVALID_SIG"]};for(let a of n?[n]:["isValidSignature","is_valid_signature"])try{let n=await this.callContract({contractAddress:this.address,entrypoint:a,calldata:n1.compile({hash:td(e).toString(),signature:aJ(t)})});if(i.nokResponse.includes(n[0].toString()))return!1;if(0===i.okResponse.length||i.okResponse.includes(n[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(e){if(i.error.some(t=>e.message.includes(t)))return!1;r=e}throw Error("Signature verification Error: ".concat(r))}async verifyMessage(e,t,n,a){let r=await this.hashMessage(e);return this.verifyMessageHash(r,t,n,a)}async getUniversalSuggestedFee(e,t,n){var a,r;let{type:i,payload:s}=t,o=0,c=aQ(eV);return e===z.ETransactionVersion.V3?c=null!==(a=n.resourceBounds)&&void 0!==a?a:(await this.getSuggestedFee({type:i,payload:s},n)).resourceBounds:o=null!==(r=n.maxFee)&&void 0!==r?r:(await this.getSuggestedFee({type:i,payload:s},n)).suggestedMaxFee,{maxFee:o,resourceBounds:c}}async getSuggestedFee(e,t){let n,{type:a,payload:r}=e;switch(a){case"INVOKE_FUNCTION":n=await this.estimateInvokeFee(r,t);break;case"DECLARE":n=await this.estimateDeclareFee(r,t);break;case"DEPLOY_ACCOUNT":n=await this.estimateAccountDeployFee(r,t);break;case"DEPLOY":n=await this.estimateDeployFee(r,t);break;default:n={gas_consumed:0n,gas_price:0n,overall_fee:eV,unit:"FRI",suggestedMaxFee:eV,resourceBounds:aQ(eV),data_gas_consumed:0n,data_gas_price:0n}}return n}async buildInvocation(e,t){let n=rA(e,await this.getCairoVersion()),a=t.skipValidate?[]:await this.signer.signTransaction(e,t);return{...a6(t),contractAddress:this.address,calldata:n,signature:a}}async buildDeclarePayload(e,t){let{classHash:n,contract:a,compiledClassHash:r}=a4(e),i=rc(a);if(void 0===r&&(t.version===z.ETransactionVersion3.F3||t.version===z.ETransactionVersion3.V3))throw Error("V3 Transaction work with Cairo1 Contracts and require compiledClassHash");let s=t.skipValidate?[]:await this.signer.signDeclareTransaction({...t,...a6(t),classHash:n,compiledClassHash:r,senderAddress:t.walletAddress});return{senderAddress:t.walletAddress,signature:s,contract:i,compiledClassHash:r}}async buildAccountDeployPayload(e,t){let{classHash:n,addressSalt:a=0,constructorCalldata:r=[],contractAddress:i}=e,s=n1.compile(r),o=null!=i?i:aV(a,n,s,0),c=t.skipValidate?[]:await this.signer.signDeployAccountTransaction({...t,...a6(t),classHash:n,contractAddress:o,addressSalt:a,constructorCalldata:s});return{...a6(t),classHash:n,addressSalt:a,constructorCalldata:s,signature:c}}buildUDCContractPayload(e){return[].concat(e).map(e=>{let{classHash:t,salt:n="0",unique:a=!0,constructorCalldata:r=[]}=e,i=n1.compile(r);return{contractAddress:eW.ADDRESS,entrypoint:eW.ENTRYPOINT,calldata:[t,n,tw(a),i.length,...i]}})}async accountInvocationsFactory(e,t){let{nonce:n,blockIdentifier:a,skipValidate:r=!0}=t,i=await this.getNonceSafe(n),s=await this.getChainId(),o=t.versions.map(e=>a1(e)),c="payload"in e[0]?e[0].payload:e[0],l="DEPLOY_ACCOUNT"===e[0].type?await this.getCairoVersion(c.classHash):await this.getCairoVersion();return Promise.all([].concat(e).map(async(e,n)=>{let c="payload"in e?e.payload:e,d={...a6(t),walletAddress:this.address,nonce:td(Number(i)+n),maxFee:eV,chainId:s,cairoVersion:l,version:"",skipValidate:r},u={type:e.type,nonce:td(Number(i)+n),blockIdentifier:a,version:""};if("INVOKE_FUNCTION"===e.type){let e=a5(o[1]);d.version=e,u.version=e;let t=await this.buildInvocation([].concat(c),d);return{...u,...t}}if("DEPLOY"===e.type){let e=a5(o[1]);d.version=e,u.version=e;let t=this.buildUDCContractPayload(c),n=await this.buildInvocation(t,d);return{...u,...n,type:"INVOKE_FUNCTION"}}if("DECLARE"===e.type){let e=a3(c.contract)?o[1]:o[0];d.version=e,u.version=e;let t=await this.buildDeclarePayload(c,d);return{...u,...t}}if("DEPLOY_ACCOUNT"===e.type){let e=a5(o[1]);d.version=e,u.version=e;let t=await this.buildAccountDeployPayload(c,d);return{...u,...t}}throw Error("accountInvocationsFactory: unsupported transaction type: ".concat(e))}))}async getStarkName(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.address,t=arguments.length>1?arguments[1]:void 0;return super.getStarkName(e,t)}constructor(e,t,n,a,r=z.ETransactionVersion.V2){super(e),this.deploySelf=this.deployAccount,this.address=t.toLowerCase(),this.signer=tL(n)||n instanceof Uint8Array?new i_(n):n,a&&(this.cairoVersion=a.toString()),this.transactionVersion=r}},iB=class extends r7{},iR={};function iP(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function iF(e){return e.request({type:"wallet_getPermissions"})}function iM(e,t){return e.request({type:"wallet_watchAsset",params:t})}function iL(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function iH(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function iU(e){return e.request({type:"wallet_requestChainId"})}function ij(e){return e.request({type:"wallet_deploymentData"})}function iq(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function iK(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function iY(e,t){return e.request({type:"wallet_signTypedData",params:t})}function iW(e){return e.request({type:"wallet_supportedSpecs"})}function iG(e,t){e.on("accountsChanged",t)}function iX(e,t){e.on("networkChanged",t)}W(iR,{addDeclareTransaction:()=>iK,addInvokeTransaction:()=>iq,addStarknetChain:()=>iL,deploymentData:()=>ij,getPermissions:()=>iF,onAccountChange:()=>iG,onNetworkChanged:()=>iX,requestAccounts:()=>iP,requestChainId:()=>iU,signMessage:()=>iY,supportedSpecs:()=>iW,switchStarknetChain:()=>iH,watchAsset:()=>iM});var iJ=class extends iO{onAccountChange(e){iG(this.walletProvider,e)}onNetworkChanged(e){iX(this.walletProvider,e)}requestAccounts(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return iP(this.walletProvider,e)}getPermissions(){return iF(this.walletProvider)}switchStarknetChain(e){return iH(this.walletProvider,e)}watchAsset(e){return iM(this.walletProvider,e)}addStarknetChain(e){return iL(this.walletProvider,e)}execute(e){let t=[].concat(e).map(e=>{let{contractAddress:t,entrypoint:n,calldata:a}=e;return{contract_address:t,entry_point:n,calldata:a}});return iq(this.walletProvider,{calls:t})}declare(e){let t=a4(e),n=e.contract,a={...n,abi:aw(n.abi)};if(!t.compiledClassHash)throw Error("compiledClassHash is required");let r={compiled_class_hash:t.compiledClassHash,contract_class:a};return iK(this.walletProvider,r)}async deploy(e){let{calls:t,addresses:n}=rw(e,this.address);return{...await this.execute(t),contract_address:n}}signMessage(e){return iY(this.walletProvider,e)}constructor(e,t,n){super(e,"","",n),this.address="",this.walletProvider=t,this.walletProvider.on("accountsChanged",e=>{e&&(this.address=e[0].toLowerCase())}),this.walletProvider.on("networkChanged",e=>{e&&this.channel.setChainId(e)}),t.request({type:"wallet_requestAccounts",params:{silent_mode:!1}}).then(e=>{this.address=e[0].toLowerCase()})}},i$=e=>{let t=e[e.length-1];return"object"==typeof t&&["blockIdentifier","parseRequest","parseResponse","formatResponse","maxFee","nonce","signature","addressSalt"].some(e=>e in t)?{args:e,options:e.pop()}:{args:e}};function iz(e,t){return async function(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];let i=i$(a);return e.call(t.name,i.args,{parseRequest:!0,parseResponse:!0,...i.options})}}function iZ(e,t){return"view"===t.stateMutability||"view"===t.state_mutability?iz(e,t):async function(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];let i=i$(a);return e.invoke(t.name,i.args,{parseRequest:!0,...i.options})}}function iQ(e,t){return Array.isArray(e)&&"__compiled__"in e?e:Array.isArray(e)&&Array.isArray(e[0])&&"__compiled__"in e[0]?e[0]:t()}var i0=class{attach(e){this.address=e}connect(e){this.providerOrAccount=e}async deployed(){return this.deployTransactionHash&&(await this.providerOrAccount.waitForTransaction(this.deployTransactionHash),this.deployTransactionHash=void 0),this}async call(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{parseRequest:n=!0,parseResponse:a=!0,formatResponse:r,blockIdentifier:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ts(null!==this.address,"contract is not connected to an address");let s=iQ(t,()=>n?(this.callData.validate("CALL",e,t),this.callData.compile(e,t)):(console.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),t));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:s,entrypoint:e},i).then(t=>a?r?this.callData.format(e,t,r):this.callData.parse(e,t):t)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{parseRequest:n=!0,maxFee:a,nonce:r,signature:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ts(null!==this.address,"contract is not connected to an address");let s=iQ(t,()=>n?(this.callData.validate("INVOKE",e,t),this.callData.compile(e,t)):(console.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),t)),o={contractAddress:this.address,calldata:s,entrypoint:e};if("execute"in this.providerOrAccount)return this.providerOrAccount.execute(o,void 0,{maxFee:a,nonce:r});if(!r)throw Error("Nonce is required when invoking a function without an account");return console.warn("Invoking ".concat(e," without an account. This will not work on a public node.")),this.providerOrAccount.invokeFunction({...o,signature:i},{nonce:r})}async estimate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];ts(null!==this.address,"contract is not connected to an address"),iQ(t,()=>!1)||this.callData.validate("INVOKE",e,t);let n=this.populate(e,t);if("estimateInvokeFee"in this.providerOrAccount)return this.providerOrAccount.estimateInvokeFee(n);throw Error("Contract must be connected to the account contract to estimate")}populate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=iQ(t,()=>this.callData.compile(e,t));return{contractAddress:this.address,entrypoint:e,calldata:n}}parseEvents(e){var t;return iV((null===(t=e.events)||void 0===t?void 0:t.filter(e=>ty(e.from_address)===ty(this.address),[]))||[],this.events,this.structs,n1.getAbiEnum(this.abi))}isCairo1(){return tJ.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv2(e){return this}constructor(e,t,n=r9){this.address=t&&t.toLowerCase(),this.providerOrAccount=n,this.callData=new n1(e),this.structs=n1.getAbiStruct(e),this.events=iD(e);let a=nB(e);this.abi=a.getLegacyFormat();let r={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(e=>{var t,n;if("function"!==e.type)return;let a=e.name;this[a]||Object.defineProperty(this,a,{...r,value:iZ(this,e)}),this.functions[a]||Object.defineProperty(this.functions,a,{...r,value:iZ(this,e)}),this.callStatic[a]||Object.defineProperty(this.callStatic,a,{...r,value:iz(this,e)}),this.populateTransaction[a]||Object.defineProperty(this.populateTransaction,a,{...r,value:(t=this,function(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return t.populate(e.name,a)})}),this.estimateFee[a]||Object.defineProperty(this.estimateFee,a,{...r,value:(n=this,function(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return n.estimate(e.name,a)})})})}},i1=class{},i2=class{async deploy(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let{args:a,options:r={parseRequest:!0}}=i$(t),i=iQ(a,()=>r.parseRequest?(this.CallData.validate("DEPLOY","constructor",a),this.CallData.compile("constructor",a)):(console.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),a)),{deploy:{contract_address:s,transaction_hash:o}}=await this.account.declareAndDeploy({contract:this.compiledContract,casm:this.casm,classHash:this.classHash,compiledClassHash:this.compiledClassHash,constructorCalldata:i,salt:r.addressSalt});ts(!!s,"Deployment of the contract failed");let c=new i0(this.compiledContract.abi,s,this.account);return c.deployTransactionHash=o,c}connect(e){return this.account=e,this}attach(e){return new i0(this.abi,e,this.account)}constructor(e){var t;this.compiledContract=e.compiledContract,this.account=e.account,this.casm=e.casm,this.abi=null!==(t=e.abi)&&void 0!==t?t:e.compiledContract.abi,this.classHash=e.classHash,this.compiledClassHash=e.compiledClassHash,this.CallData=new n1(this.abi)}},i6=class{},i5=n(88368);function i3(e){let t=eA(th(ew(e.toString()))).padStart(64,"0");return ew(t)}function i4(e){let t=i3(e);if(!t.match(/^(0x)?[0-9a-fA-F]{64}$/))throw Error("Invalid Address Format");return tm(t,eV,eP-1n,"Starknet Address"),t}function i8(e){let t=eA(i4(e)).toLowerCase().split(""),n=eA(tV(e)),a=(0,i5.hexToBytes)(n.padStart(64,"0"));for(let e=0;e<t.length;e+=2)a[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&a[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return ew(t.join(""))}function i7(e){return i8(e)===e}var i9=X(n(22660)),se=/^(?:\w+:)?\/\/(\S+)$/,st=/^localhost[:?\d]*(?:[^:?\d]\S*)?$/,sn=/^[^\s.]+\.\S{2,}$/;function sa(e){if(!e||"string"!=typeof e)return!1;let t=e.match(se);if(!t)return!1;let n=t[1];return!!n&&!!(st.test(n)||sn.test(n))}function sr(e,t,n){return sa(n)?n:(0,i9.default)(e,null!=n?n:t)}var si=to}}]);